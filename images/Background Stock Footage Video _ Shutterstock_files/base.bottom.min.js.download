!function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return b.href&&h&&"map"===g.nodeName.toLowerCase()?(f=a("img[usemap=#"+h+"]")[0],!!f&&d(f)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1==c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d="center",e={},f=a.fn.position,g=a.fn.offset;a.fn.position=function(g){if(!g||!g.of)return f.apply(this,arguments);g=a.extend({},g);var h,i,j,k=a(g.of),l=k[0],m=(g.collision||"flip").split(" "),n=g.offset?g.offset.split(" "):[0,0];return 9===l.nodeType?(h=k.width(),i=k.height(),j={top:0,left:0}):l.setTimeout?(h=k.width(),i=k.height(),j={top:k.scrollTop(),left:k.scrollLeft()}):l.preventDefault?(g.at="left top",h=i=0,j={top:g.of.pageY,left:g.of.pageX}):(h=k.outerWidth(),i=k.outerHeight(),j=k.offset()),a.each(["my","at"],function(){var a=(g[this]||"").split(" ");1===a.length&&(a=b.test(a[0])?a.concat([d]):c.test(a[0])?[d].concat(a):[d,d]),a[0]=b.test(a[0])?a[0]:d,a[1]=c.test(a[1])?a[1]:d,g[this]=a}),1===m.length&&(m[1]=m[0]),n[0]=parseInt(n[0],10)||0,1===n.length&&(n[1]=n[0]),n[1]=parseInt(n[1],10)||0,"right"===g.at[0]?j.left+=h:g.at[0]===d&&(j.left+=h/2),"bottom"===g.at[1]?j.top+=i:g.at[1]===d&&(j.top+=i/2),j.left+=n[0],j.top+=n[1],this.each(function(){var b,c=a(this),f=c.outerWidth(),k=c.outerHeight(),l=parseInt(a.curCSS(this,"marginLeft",!0))||0,o=parseInt(a.curCSS(this,"marginTop",!0))||0,p=f+l+(parseInt(a.curCSS(this,"marginRight",!0))||0),q=k+o+(parseInt(a.curCSS(this,"marginBottom",!0))||0),r=a.extend({},j);"right"===g.my[0]?r.left-=f:g.my[0]===d&&(r.left-=f/2),"bottom"===g.my[1]?r.top-=k:g.my[1]===d&&(r.top-=k/2),e.fractions||(r.left=Math.round(r.left),r.top=Math.round(r.top)),b={left:r.left-l,top:r.top-o},a.each(["left","top"],function(c,d){a.ui.position[m[c]]&&a.ui.position[m[c]][d](r,{targetWidth:h,targetHeight:i,elemWidth:f,elemHeight:k,collisionPosition:b,collisionWidth:p,collisionHeight:q,offset:n,my:g.my,at:g.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(r,{using:g.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==d){var e=a(window),f=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==d){var e=a(window),f=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(a.isFunction(b)?function(c){a(this).offset(b.call(this,c,a(this).offset()))}:function(){a.offset.setOffset(this,b)}):g.call(this):null}),a.curCSS||(a.curCSS=a.css),function(){var b,c,d,f,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in d)b.style[j]=d[j];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",f=a(i).offset(function(a,b){return b}).offset(),b.innerHTML="",c.removeChild(b),g=f.top+f.left+(h?2e3:0),e.fractions=g>21&&22>g}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]==this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.24"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,c=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(c.length){var d=parseInt(c[0].style.zIndex)||0;a(c).each(function(a){this.style.zIndex=d+a}),this[0].style.zIndex=d+c.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)
},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.24"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return e>=i&&j>=f&&g>=k&&l>=h;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l)&&(e>=i&&j>=e||f>=i&&j>=f||i>e&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();a:for(var g=0;g<d.length;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}d[g].visible="none"!=d[g].element.css("display"),d[g].visible&&("mousedown"==e&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===g});h.length&&(f=a.data(h[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=b(this.helper.css("left")),h=b(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c=this.helper,d=(this.options,this.originalMousePosition),e=this.axis,f=b.pageX-d.left||0,g=b.pageY-d.top||0,h=this._change[e];if(!h)return!1;{var i=h.apply(this,[b,f,g]);a.browser.msie&&a.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(i=this._updateRatio(i,b)),i=this._respectSize(i,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),d<g.maxWidth&&(g.maxWidth=d),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.options;this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=(this.options,this.position),d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"==e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a,b){var d=(this.helper,this._vBoundaries),e=(this._aspectRatio||b.shiftKey,this.axis),f=c(a.width)&&d.maxWidth&&d.maxWidth<a.width,g=c(a.height)&&d.maxHeight&&d.maxHeight<a.height,h=c(a.width)&&d.minWidth&&d.minWidth>a.width,i=c(a.height)&&d.minHeight&&d.minHeight>a.height;h&&(a.width=d.minWidth),i&&(a.height=d.minHeight),f&&(a.width=d.maxWidth),g&&(a.height=d.maxHeight);var j=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,l=/sw|nw|w/.test(e),m=/nw|ne|n/.test(e);h&&l&&(a.left=j-d.minWidth),f&&l&&(a.left=j-d.maxWidth),i&&m&&(a.top=k-d.minHeight),g&&m&&(a.top=k-d.maxHeight);var n=!a.width&&!a.height;return n&&!a.left&&a.top?a.top=null:n&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var e=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}a.browser.msie&&(a(b).is(":hidden")||a(b).parents(":hidden").length)||d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=(this.options,this.originalSize),d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=(this.options,this.originalSize),e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.24"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),d=c.options,e=c.element,f=d.containment,g=f instanceof a?f.get(0):/parent/.test(f)?e.parent().get(0):f;if(g)if(c.containerElement=a(g),/document/.test(f)||f==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var h=a(g),i=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){i[a]=b(h.css("padding"+c))}),c.containerOffset=h.offset(),c.containerPosition=h.position(),c.containerSize={height:h.innerHeight()-i[3],width:h.innerWidth()-i[1]};var j=c.containerOffset,k=c.containerSize.height,l=c.containerSize.width,m=a.ui.hasScroll(g,"left")?g.scrollWidth:l,n=a.ui.hasScroll(g)?g.scrollHeight:k;c.parentData={element:g,left:j.left,top:j.top,width:m,height:n}}},resize:function(b){var c=a(this).data("resizable"),d=c.options,e=(c.containerSize,c.containerOffset),f=(c.size,c.position),g=c._aspectRatio||b.shiftKey,h={top:0,left:0},i=c.containerElement;i[0]!=document&&/static/.test(i.css("position"))&&(h=e),f.left<(c._helper?e.left:0)&&(c.size.width=c.size.width+(c._helper?c.position.left-e.left:c.position.left-h.left),g&&(c.size.height=c.size.width/c.aspectRatio),c.position.left=d.helper?e.left:0),f.top<(c._helper?e.top:0)&&(c.size.height=c.size.height+(c._helper?c.position.top-e.top:c.position.top),g&&(c.size.width=c.size.height*c.aspectRatio),c.position.top=c._helper?e.top:0),c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top;var j=Math.abs((c._helper?c.offset.left-h.left:c.offset.left-h.left)+c.sizeDiff.width),k=Math.abs((c._helper?c.offset.top-h.top:c.offset.top-e.top)+c.sizeDiff.height),l=c.containerElement.get(0)==c.element.parent().get(0),m=/relative|absolute/.test(c.containerElement.css("position"));l&&m&&(j-=c.parentData.left),j+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-j,g&&(c.size.height=c.size.width/c.aspectRatio)),k+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-k,g&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(){var b=a(this).data("resizable"),c=b.options,d=(b.position,b.containerOffset),e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b){{var c=a(this).data("resizable"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis;d._aspectRatio||b.shiftKey}d.grid="number"==typeof d.grid?[d.grid,d.grid]:d.grid;var i=Math.round((e.width-f.width)/(d.grid[0]||1))*(d.grid[0]||1),j=Math.round((e.height-f.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j):/^(ne)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j):/^(sw)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.left=g.left-i):(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j,c.position.left=g.left-i)}});var b=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&(b.metaKey||b.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element}))))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.24"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);{var e=null,f=this;a(b.target).parents().each(function(){return a.data(this,d.widgetName+"-item")==f?(e=a(this),!1):void 0})}if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var g=!1;if(a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(g=!0)}),!g)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)
}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&f.instance===this.currentContainer&&g!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],g):!0)){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&i>d+j&&b+k>f&&g>b+k;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],e=this._connectWith();if(e&&b)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&d.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var f=d.length-1;f>=0;f--)d[f][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&(d.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]),this.containers.push(i))}for(var f=d.length-1;f>=0;f--)for(var j=d[f][1],k=d[f][0],h=0,l=k.length;l>h;h++){var m=a(k[h]);m.data(this.widgetName+"-item",j),c.push({item:m,instance:j,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){(!e||d.forcePlaceholderSize)&&(b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])&&(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||c||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(c||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(var e=this.containers.length-1;e>=0;e--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.24"})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b,c=this,d=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!c.options.disabled&&!c.element.propAttr("readOnly")){b=!1;var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:c._move("previousPage",d);break;case e.PAGE_DOWN:c._move("nextPage",d);break;case e.UP:c._keyEvent("previous",d);break;case e.DOWN:c._keyEvent("next",d);break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(b=!0,d.preventDefault());case e.TAB:if(!c.menu.active)return;c.menu.select(d);break;case e.ESCAPE:c.element.val(c.term),c.close(d);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){c.term!=c.element.val()&&(c.selectedItem=null,c.search(null,d))},c.options.delay)}}}).bind("keypress.autocomplete",function(a){b&&(b=!1,a.preventDefault())}).bind("focus.autocomplete",function(){c.options.disabled||(c.selectedItem=null,c.previous=c.element.val())}).bind("blur.autocomplete",function(a){c.options.disabled||(clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(a),c._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(b){var d=c.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target===c.element[0]||b.target===d||a.ui.contains(d,b.target)||c.close()})},1),setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(a,b){var d=b.item.data("item.autocomplete");!1!==c._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&c.element.val(d.value)},selected:function(a,b){var e=b.item.data("item.autocomplete"),f=c.previous;c.element[0]!==d.activeElement&&(c.element.focus(),c.previous=f,setTimeout(function(){c.previous=f,c.selectedItem=e},1)),!1!==c._trigger("select",a,{item:e})&&c.element.val(e.value),c.term=c.element.val(),c.close(a),c.selectedItem=e},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),c.beforeunloadHandler=function(){c.element.removeAttr("autocomplete")},a(window).bind("beforeunload",c.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),this._trigger("search",b)!==!1?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();0>c?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)return void this.activate(c,this.element.children(b));var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){function b(b,c,d,e){var f={data:e||(c?c.data:{}),_wrap:c?c._wrap:null,tmpl:null,parent:c||null,nodes:[],calls:j,nest:k,wrap:l,html:m,update:n};return b&&a.extend(f,b,{nodes:[],parent:c}),d&&(f.tmpl=d,f._ctnt=f._ctnt||f.tmpl(a,f),f.key=++v,(x.length?t:s)[v]=f),f}function c(b,e,f){var g,h=f?a.map(f,function(a){return"string"==typeof a?b.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+q+'="'+b.key+'" $2'):a:c(a,b,a._ctnt)}):b;return e?h:(h=h.join(""),h.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(b,c,e,f){g=a(e).get(),i(g),c&&(g=d(c).concat(g)),f&&(g=g.concat(d(f)))}),g?g:d(h))}function d(b){var c=document.createElement("div");return c.innerHTML=b,a.makeArray(c.childNodes)}function e(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(b,c,d,e,f,h,i){var j,k,l,m=a.tmpl.tag[d];if(!m)throw"Template command not found: "+d;return j=m._default||[],h&&!/\w$/.test(f)&&(f+=h,h=""),f?(f=g(f),i=i?","+g(i)+")":h?")":"",k=h?f.indexOf(".")>-1?f+h:"("+f+").call($item"+i:f,l=h?k:"(typeof("+f+")==='function'?("+f+").call($item):("+f+"))"):l=k=j.$1||"null",e=g(e),"');"+m[c?"close":"open"].split("$notnull_1").join(f?"typeof("+f+")!=='undefined' && ("+f+")!=null":"true").split("$1a").join(l).split("$1").join(k).split("$2").join(e?e.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(a,b,c,d){return d=d?","+d+")":c?")":"",d?"("+b+").call($item"+d:a}):j.$2||"")+"_.push('"})+"');}return _;")}function f(b,d){b._wrap=c(b,!0,a.isArray(d)?d:[r.test(d)?d:a(d).html()]).join("")}function g(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function h(a){var b=document.createElement("div");return b.appendChild(a.cloneNode(!0)),b.innerHTML}function i(c){function d(c){function d(a){a+=j,g=k[a]=k[a]||b(g,s[g.parent.key+j]||g.parent,null,!0)}var e,f,g,h,i=c;if(h=c.getAttribute(q)){for(;i.parentNode&&1===(i=i.parentNode).nodeType&&!(e=i.getAttribute(q)););e!==h&&(i=i.parentNode?11===i.nodeType?0:i.getAttribute(q)||0:0,(g=s[h])||(g=t[h],g=b(g,s[i]||t[i],null,!0),g.key=++v,s[v]=g),w&&d(h)),c.removeAttribute(q)}else w&&(g=a.data(c,"tmplItem"))&&(d(g.key),s[g.key]=g,i=a.data(c.parentNode,"tmplItem"),i=i?i.key:0);if(g){for(f=g;f&&f.key!=i;)f.nodes.push(c),f=f.parent;delete g._ctnt,delete g._wrap,a.data(c,"tmplItem",g)}}var e,f,g,h,i,j="_"+w,k={};for(g=0,h=c.length;h>g;g++)if(1===(e=c[g]).nodeType){for(f=e.getElementsByTagName("*"),i=f.length-1;i>=0;i--)d(f[i]);d(e)}}function j(a,b,c,d){return a?void x.push({_:a,tmpl:b,item:this,data:c,options:d}):x.pop()}function k(b,c,d){return a.tmpl(a.template(b),c,d,this)}function l(b,c){var d=b.options||{};return d.wrapped=c,a.tmpl(a.template(b.tmpl),b.data,d,b.item)}function m(b,c){var d=this._wrap;return a.map(a(a.isArray(d)?d.join(""):d).filter(b||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||h(a)})}function n(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]),a(b).remove()}var o,p=a.fn.domManip,q="_tmplitem",r=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,s={},t={},u={key:0,data:{}},v=0,w=0,x=[];a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){a.fn[b]=function(d){var e,f,g,h,i=[],j=a(d),k=1===this.length&&this[0].parentNode;if(o=s||{},k&&11===k.nodeType&&1===k.childNodes.length&&1===j.length)j[c](this[0]),i=this;else{for(f=0,g=j.length;g>f;f++)w=f,e=(f>0?this.clone(!0):this).get(),a.fn[c].apply(a(j[f]),e),i=i.concat(e);w=0,i=this.pushStack(i,b,j.selector)}return h=o,o=null,a.tmpl.complete(h),i}}),a.fn.extend({tmpl:function(b,c,d){return a.tmpl(this[0],b,c,d)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(b,c,d){if(b[0]&&b[0].nodeType){for(var e,f=a.makeArray(arguments),g=b.length,h=0;g>h&&!(e=a.data(b[h++],"tmplItem")););g>1&&(f[0]=[a.makeArray(b)]),e&&w&&(f[2]=function(b){a.tmpl.afterManip(this,b,d)}),p.apply(this,f)}else p.apply(this,arguments);return w=0,o||a.tmpl.complete(s),this}}),a.extend({tmpl:function(d,e,g,h){var i,j=!h;if(j)h=u,d=a.template[d]||a.template(null,d),t={};else if(!d)return d=h.tmpl,s[h.key]=h,h.nodes=[],h.wrapped&&f(h,h.wrapped),a(c(h,null,h.tmpl(a,h)));return d?("function"==typeof e&&(e=e.call(h||{})),g&&g.wrapped&&f(g,g.wrapped),i=a.isArray(e)?a.map(e,function(a){return a?b(g,h,d,a):null}):[b(g,h,d,e)],j?a(c(h,null,i)):i):[]},tmplItem:function(b){var c;for(b instanceof a&&(b=b[0]);b&&1===b.nodeType&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode););return c||u
},template:function(b,c){return c?("string"==typeof c?c=e(c):c instanceof a&&(c=c[0]||{}),c.nodeType&&(c=a.data(c,"tmpl")||a.data(c,"tmpl",e(c.innerHTML))),"string"==typeof b?a.template[b]=c:c):b?"string"!=typeof b?a.template(null,b):a.template[b]||a.template(null,r.test(b)?b:a(b)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){s={}},afterManip:function(b,c,d){var e=11===c.nodeType?a.makeArray(c.childNodes):1===c.nodeType?[c]:[];d.call(b,c),i(e),w++}})}(jQuery),!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(".dropdown-backdrop").remove(),a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var d,e,f=a(this);if(!f.is(".disabled, :disabled"))return d=c(f),e=d.hasClass("open"),b(),e||("ontouchstart"in document.documentElement&&a('<div class="dropdown-backdrop"/>').insertBefore(a(this)).on("click",b),d.toggleClass("open")),f.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade"),d={visibility:"visible"};b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.css({visibility:"hidden"}),b.options.topOverride||(d.marginTop=b.$element.height()/-2),b.$element.css(d).addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,topOverride:!1,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h,i=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(i),i.isDefaultPrevented())return;if(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),this.options.style&&b.addClass(this.options.style),h=this.options.margin,f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,"auto"===f){var j=a(window).scrollTop(),k=c.top-j,l=c.top+c.height/2-e/2-j,m=c.left+c.width/2-d/2;f=k>e&&m>0?"top":c.left>d&&l>0?"left":c.left+d>d?"right":"bottom"}switch(f){case"bottom":g={top:c.top+c.height+h,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e-h,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d-h};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width+h}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,margin:0,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=a(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var b=a(this);b.data("typeahead")||b.typeahead(b.data())})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),function(a){"use strict";var b={arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.removeClass(e).detach()})}var c=this.tip(),d=a.Event("hide"),e="string"==typeof this.placement?this.placement:"";return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.removeClass(e).detach(),this.options.clickAway&&a("body").off("click",this.clickAwayClose),this.$element.trigger("hidden"),this)},show:function(){var b,c,d,e,f,g,h,i,j,k=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(k),k.isDefaultPrevented())return;if(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),this.options.style&&b.addClass(this.options.style),j=this.options.margin,b.detach().css({top:0,left:0,display:"block",visibility:"hidden"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f=this.placement="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0],d,e,c):this.options.placement,"undefined"==typeof f||"string"==typeof f)if("auto"===f)h=this.getMetrics(d,e,c),g=this.getPositions(h),f=this.getPlacement(g),i=this.setCoords(h,f);else switch(f){case"bottom":i={top:c.top+c.height+j,left:c.left+c.width/2-d/2};break;case"top":i={top:c.top-e-j,left:c.left+c.width/2-d/2};break;case"left":i={top:c.top+c.height/2-e/2,left:c.left-d-j};break;case"right":i={top:c.top+c.height/2-e/2,left:c.left+c.width+j};break;case"topLeft":i={top:c.top-e-j,left:c.left};break;case"topRight":i={top:c.top-e-j,left:c.left+c.width-d};break;case"rightTop":i={top:c.top,left:c.left+c.width+j};break;case"rightBottom":i={top:c.top+c.height-e,left:c.left+c.width+j};break;case"bottomLeft":i={top:c.top+c.height+j,left:c.left};break;case"bottomRight":i={top:c.top+c.height+j,left:c.left+c.width-d};
break;case"leftTop":i={top:c.top,left:c.left-d-j};break;case"leftBottom":i={top:c.top+c.height-e,left:c.left-d-j}}else"undefined"!=typeof f.top&&"undefined"!=typeof f.left&&(i=f,f="");this.applyPlacement(i,f),this.options.centerArrowOnTrigger&&this.setArrowPosition(f),b.css({visibility:"visible"}),this.options.clickAway&&a("body").on("click",{that:this},this.clickAwayClose),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;return this.options.container?void g.css({top:a.top,left:a.left}):(g.offset(a),g.addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),void(f&&g.offset(a)))},tip:function(){var b=this.options;return this.$tip||(this.$tip=a("function"==typeof b.template?b.template():b.template)),this.$tip},getMetrics:function(a,b,c){var d={window:this.getWindowMetrics(),overlay:{width:a,height:b}};return d.trigger=this.getTriggerMetrics(c,d),d},getWindowMetrics:function(){var b=a(window);return{height:b.height(),width:b.width(),top:b.scrollTop(),left:b.scrollLeft()}},getTriggerMetrics:function(a,b){return a.top-=b.window.top,a.left-=b.window.left,a.width=this.$element.width(),a.height=this.$element.height(),a},getPositions:function(a){return{top:a.trigger.top-a.window.top-a.overlay.height,left:a.trigger.left-a.window.left-a.overlay.width,bottom:a.window.height-(a.trigger.top+a.overlay.height),right:a.window.width-(a.trigger.left+a.trigger.width+a.overlay.width)}},getPlacement:function(a){var b;return Object.keys(a).forEach(function(c){b=b?b:c,b=a[c]>a[b]?c:b}),b},setCoords:function(a,b){var c={},d=0,e=0;switch(b){case"top":d=a.trigger.top-a.overlay.height-this.options.margin,e=a.trigger.left+a.trigger.width/2-a.overlay.width/2;break;case"left":d=a.trigger.top+a.trigger.height/2-a.overlay.height/2,e=a.trigger.left-a.overlay.width-this.options.margin-3;break;case"bottom":d=a.trigger.top+a.trigger.height+this.options.margin,e=a.trigger.left+a.trigger.width/2-a.overlay.width/2;break;case"right":d=a.trigger.top+a.trigger.height/2-a.overlay.height/2,e=a.trigger.left+a.trigger.width+this.options.margin}return c.top=d,c.left=e,this.adjustCoords(a,b,c)},adjustCoords:function(a,b,c){return"left"===b||"right"===b?c.top<0?c.top=this.options.margin:c.top+a.overlay.height>a.window.height&&(c.top=a.window.height-a.overlay.height-this.options.margin):c.left<0?c.left=this.options.margin:c.left+a.overlay.width>a.window.width&&(c.left=a.window.width-a.overlay.width-this.options.margin),c.top=c.top+a.window.top,c.left=c.left+a.window.left,c},clickAwayClose:function(a){var b=a.data.that,c=!b.$tip[0].contains(a.target),d=a.target!==b.$element[0],e=!b.$element[0].contains(a.target),f=null!==a.target.parentNode;c&&d&&e&&f&&b.hide()},calculateArrowPosition:function(a,b){var c=this.$element[a.plane]()/2,d=b[a.plane]/2,e={top:{bottom:"auto"},right:{left:"auto"},bottom:{top:"auto"},left:{right:"auto"}},f=e[a.end];return f[a.end]=c-d+"px",f},getArrowDimensions:function(){var a=[parseFloat(this.$arrow.css("border-top-width")),parseFloat(this.$arrow.css("border-right-width")),parseFloat(this.$arrow.css("border-bottom-width")),parseFloat(this.$arrow.css("border-left-width"))];return{width:a[1]+a[3],height:a[0]+a[2]}},getArrowLocation:function(a){var b={};return/^bottom|^top/.test(a)?(b.plane="width",/Left$/.test(a)?b.end="left":/Right$/.test(a)&&(b.end="right")):/^left|^right/.test(a)&&(b.plane="height",/Top$/.test(a)?b.end="top":/Bottom$/.test(a)&&(b.end="bottom")),b},setArrowPosition:function(a){var b,c,d;/auto|\btop\b|\bright\b|\bbottom\b|\bleft\b/.test(a)||(b=this.getArrowDimensions(),c=this.getArrowLocation(a),d=this.calculateArrowPosition(c,b),this.$arrow.css(d))}},c={arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();0===a.find(".popover-title").children().length&&a.find(".popover-title")[this.options.html?"html":"text"](b),0===a.find(".popover-content > div").children().length&&a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")}},d={backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),c.options.clickAway&&this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}},e={popover:{margin:0,clickAway:!1,centerArrowOnTrigger:!1},modal:{backdrop:!0,keyboard:!0,topOverride:!1,show:!0,clickAway:!0}};a.fn.tooltip.Constructor.prototype=a.extend(a.fn.tooltip.Constructor.prototype,b),a.fn.popover.Constructor.prototype=a.extend(a.fn.popover.Constructor.prototype,b,c),a.fn.modal.Constructor.prototype=a.extend(a.fn.modal.Constructor.prototype,d),a.fn.tooltip.defaults=a.extend(a.fn.tooltip.defaults,e.popover),a.fn.popover.defaults=a.extend(a.fn.popover.defaults,e.popover),a.fn.modal.defaults=a.extend(a.fn.modal.defaults,e.modal)}(window.jQuery),Ss=window.Ss||{},function(a,b,c,d,e){function f(a,b){var e={};e.settings={};var f=function(){return e.settings=d.extend({},h,b),e.sel=a,e.$overlay=j.getOverlay(),e.$overlayCaption=e.$overlay.find("."+e.settings.overlayCaptionClass),e.$video=e.$overlay.find("video"),e.$videoCover=e.$overlay.find("."+e.settings.overlayVideoCoverClass),e.$videoSrc={},e.$videoSrc.mp4=e.$video.find("."+e.settings.overlayVideoSrcMp4Class),e.$videoSrc.webm=e.$video.find("."+e.settings.overlayVideoSrcWebmClass),e.$delegateTarget=d(e.settings.delegateTargetSel),e.handleTouchEvents=!1,void 0!=e.$video[0].play?(e.bindPageLevelEvents(),e.$video.on("playing",function(){j.hideVideoCover(),e.$video.removeAttr("controls")}),e):void 0};e.bindPageLevelEvents=function(){e.$delegateTarget.on("mouseleave.previewoverlay",e.sel,i.mouseleave),e.$delegateTarget.on("mouseenter.previewoverlay",e.sel,i.mouseenter),e.$delegateTarget.one("touchstart.previewoverlay",e.sel,i.touchstart)},e.removePageLevelEvents=function(){e.$delegateTarget.off(".previewoverlay")},e.show=function(a){var b=d.Deferred(),c=function(){j.previewing(!0),e.$overlay.addClass(e.settings.overlayShownClass).css({visibility:"visible"}),b.resolve()};return j.isPreviewing()&&e.hide(),e.$targetClip=d(a).closest(e.sel),e.clipData=j.getClipData(a),e.settings.onShow.call(e),e.$video.one("canplay",function(){clearTimeout(e.showTimeout),j.isPreviewing()||c()}),clearTimeout(e.showTimeout),e.showTimeout=setTimeout(c,e.settings.showDelay),j.showVideoCover(),e.$overlay.css({visibility:"hidden",display:"block"}),j.setupOverlay(),j.playVideo(),b},e.hide=function(){j.previewing(!1),e.$overlay.removeClass(e.settings.overlayShownClass).hide(),j.stopVideo(),e.settings.onHide.call(e)};var i={mouseenter:function(a){e.settings.disableBreakpoint&&g.width()<=e.settings.disableBreakpoint||(clearTimeout(e.hoverTimeout),e.hoverTimeout=setTimeout(function(){e.show(a.currentTarget)},e.settings.hoverDelay),e.handleTouchEvents&&(d(a.currentTarget).append('<b class="video-preview-overlay-dummy">'),d("body").on("touchstart.previewoverlaytouchoutside",function(b){e.$overlay.is(b.target)||e.$overlay.find(b.target).length||(d("body").off(".previewoverlaytouchoutside"),i.mouseleave(a))})))},mouseleave:function(a){clearTimeout(e.hoverTimeout),e.hide(),e.handleTouchEvents&&d(a.currentTarget).find(".video-preview-overlay-dummy").remove()},touchstart:function(){e.handleTouchEvents=!0}},j={getOverlay:function(){var a,b=e.settings,c=b.inPlace?b.overlayInPlaceClass:b.overlayClass,f=d("#"+e.settings.overlayId+"."+c);return f.length?f:(a=j.isIOS()?'<div id="'+b.overlayId+'" class="'+c+'"><div class="video-wrapper"><video loop controls width="'+b.overlayVideoWidth+'" height="'+b.overlayVideoHeight+'">':'<div id="'+b.overlayId+'" class="'+c+'"><div class="video-wrapper"><div class="'+b.overlayVideoCoverClass+'"></div><video loop width="'+b.overlayVideoWidth+'" height="'+b.overlayVideoHeight+'">',a+='<source class="'+b.overlayVideoSrcMp4Class+'" type="video/mp4"></source><source class="'+b.overlayVideoSrcWebmClass+'" type="video/webm"></source></video></div><div class="'+b.overlayCaptionClass+'"></div></div>',d(a).appendTo("body"))},showVideoCover:function(){e.settings.usePosterImage&&e.clipData[e.settings.dataAttrPosterImageUrl]&&e.$videoCover.css("background-image","url("+e.clipData[e.settings.dataAttrPosterImageUrl]+")"),e.$videoCover.show()},hideVideoCover:function(){e.settings.usePosterImage&&e.$videoCover.css("background-image",""),e.$videoCover.hide()},setupOverlay:function(){if(j.loadVideo(),e.settings.inPlace){var a=e.settings.inPlaceAppendToSel?e.$targetClip.find(e.settings.inPlaceAppendToSel):e.$targetClip;e.$overlay.detach().appendTo(a)}else e.$overlayCaption.text(e.clipData[e.settings.dataAttrCaption]||""),e.$overlay.css(j.getOverlayPosition())},loadVideo:function(){var a=!1;d.each(["webm","mp4"],function(b,c){var d=e.clipData.previewUrls[c];e.$videoSrc[c].attr("src",d),!a&&e.$video[0].canPlayType&&e.$video[0].canPlayType("video/"+c)&&(a=!0,e.$video[0].src=d)}),e.$video[0].load()},playVideo:function(){e.$video[0].play(),e.$video[0].muted=!0},stopVideo:function(){e.$video[0].pause()},getOverlayPosition:function(){var a,b,c,d,f=e.$targetClip.offset(),h=e.$targetClip.outerWidth(),i=e.settings.overlayMargin,k={top:g.scrollTop(),left:g.scrollLeft()};return e.settings.fullScreenBreakpoint&&g.width()<=e.settings.fullScreenBreakpoint?(e.$overlay.addClass(e.settings.overlayFullScreenClass),{top:e.settings.fullScreenPositionTop,left:""}):(e.$overlay.removeClass(e.settings.overlayFullScreenClass),k.right=k.left+g.width(),a=j.getOverlayDimensions(),b=f.top-(a.height+i),c=f.left+.5*h-.5*a.width,d=c+a.width,-1===e.settings.positions.indexOf("top")||k.top>b?(b=f.top-.5*(a.height+i)+.5*e.$targetClip.height(),c=f.left-a.width-i,(-1===e.settings.positions.indexOf("left")||k.left>c)&&-1!==e.settings.positions.indexOf("right")&&(c=f.left+h+i),k.top>b&&(b=k.top+i)):k.left>c?c+=Math.abs(c-k.left):k.right<d&&(c-=Math.abs(k.right-d)),{top:b,left:c})},getOverlayDimensions:function(){return e.overlayDimensions||(e.overlayDimensions={width:e.$overlay.outerWidth(),height:e.$overlay.outerHeight()}),e.overlayDimensions},getClipData:function(a){var b=e.$targetClip.data()||{};b.previewUrls=j.getPreviewUrls(b);for(var c in e.settings.accessors)e.settings.accessors.hasOwnProperty(c)&&"function"==typeof e.settings.accessors[c]&&(b[c]=e.settings.accessors[c](a));return b},getPreviewUrls:function(a){var b={};return b.mp4=a[e.settings.dataAttrMp4Url]||a[e.settings.dataAttrPreviewUrl]||"",b.webm=a[e.settings.dataAttrWebmUrl]||b.mp4.replace(e.settings.videoBaseUrlRegex,".webm"),b},previewing:function(a){e.previewing=a,e.$targetClip&&(a?e.$targetClip.addClass(e.settings.previewingClass):e.$targetClip.removeClass(e.settings.previewingClass))},isPreviewing:function(){return e.previewing},isIOS:function(){return e.settings.iOSTestRegex.test(c.userAgent)}};return f()}var g=d(b),h={delegateTargetSel:"body",overlayId:"video-preview-overlay",overlayClass:"video-preview-overlay",overlayInPlaceClass:"video-preview-in-place",overlayShownClass:"video-preview-shown",overlayFullScreenClass:"video-preview-fullscreen",overlayCaptionClass:"video-caption",overlayVideoCoverClass:"video-cover",overlayVideoSrcMp4Class:"source-mp4",overlayVideoSrcWebmClass:"source-webm",inPlace:!1,inPlaceAppendToSel:".clip",usePosterImage:!1,overlayVideoHeight:180,overlayVideoWidth:320,overlayMargin:10,fullScreenBreakpoint:850,fullScreenPositionTop:"15vh",disableBreakpoint:480,positions:["top","left","right"],iOSTestRegex:/(iPad|iPhone|iPod)/g,previewingClass:"previewing",dataAttrMp4Url:"previewMp4",dataAttrWebmUrl:"previewWebm",dataAttrPreviewUrl:"preview_url",videoBaseUrlRegex:/\.\w+$/i,dataAttrCaption:"description",dataAttrPosterImageUrl:"thumbnail",hoverDelay:50,showDelay:200,accessors:{},onShow:d.noop,onHide:d.noop};e.videoPreviewOverlay=f}(document,window,navigator,jQuery,Ss),function(a,b){"use strict";"object"==typeof exports&&module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.PubSub=b()}("object"==typeof window&&window||this,function(){"use strict";function a(a){return function(){throw a}}function b(b,c,d){try{b(c,d)}catch(e){setTimeout(a(e),0)}}function c(a,b,c){a(b,c)}function d(a,d,e,f){var g,h=i[d],j=f?c:b;if(i.hasOwnProperty(d))for(g=0;g<h.length;g++)j(h[g].func,a,e)}function e(a,b,c){return function(){var e=String(a),f=e.lastIndexOf(".");for(d(a,a,b,c);-1!==f;)e=e.substr(0,f),f=e.lastIndexOf("."),d(a,e,b)}}function f(a){for(var b=String(a),c=i.hasOwnProperty(b),d=b.lastIndexOf(".");!c&&-1!==d;)b=b.substr(0,d),d=b.lastIndexOf("."),c=i.hasOwnProperty(b);return c&&i[b].length>0}function g(a,b,c,d){var g=e(a,b,d),h=f(a);return h?(c===!0?g():setTimeout(g,0),!0):!1}var h={},i={},j=-1;return h.publish=function(a,b){return g(a,b,!1,h.immediateExceptions)},h.publishSync=function(a,b){return g(a,b,!0,h.immediateExceptions)},h.subscribe=function(a,b){if("function"!=typeof b)return!1;i.hasOwnProperty(a)||(i[a]=[]);var c=String(++j);return i[a].push({token:c,func:b}),c},h.unsubscribe=function(a){var b,c,d="string"==typeof a,e=d?"token":"func",f=d?a:!0,g=!1;for(b in i)if(i.hasOwnProperty(b))for(c=i[b].length-1;c>=0;c--)if(i[b][c][e]===a&&(i[b].splice(c,1),g=f,d))return g;return g},h}),function(a,b){function c(a){this.swig=a,this.store={},this.div=b.createElement("div")}var d;c.prototype.getTemplateContent=function(a,c,d){var e=b.getElementById(a),f=c?this.swig.compile(e.innerHTML):e.innerHTML.trim();return d&&(e.parentNode&&(e=e.parentNode.removeChild(e)),e=null),f},c.prototype.preprocessTemplate=function(a,b,c){return this.store[a]=this.store[a]||this.getTemplateContent(a,b,c),this.store[a]},c.prototype.processTemplateAsString=function(a,b,c){var d=this.preprocessTemplate(a,b,c);return b?d(b).trim():d},c.prototype.processTemplate=function(a,c,d){var e;if(this.div.innerHTML=this.processTemplateAsString(a,c,d),this.div.childNodes.length>1)for(e=b.createDocumentFragment();this.div.firstChild;)e.appendChild(this.div.firstChild);else e=this.div.removeChild(this.div.firstChild);return e},c.prototype.destroy=function(){this.div=this.swig=this.store=d=null},a.createSwigUtils=function(a,b){return b&&d&&d.destroy(),d||a&&(d=new c(a)),d}}(window,document),function(a,b,c,d){a.swig=null,c.utils=c.utils||{},c.utils.addPlaceholder=function(a){$.prototype.placeholder&&!d.input.placeholder&&(a=a||b.body,$("input, textarea",a).filter("[placeholder]").placeholder())}}(window,document,Ss,Modernizr),function(a,b,c,d){!function(){function b(b){var c=decodeURIComponent(encodeURIComponent(a.location.pathname)),d=decodeURIComponent(encodeURIComponent(a.location.search)),e=decodeURIComponent(encodeURIComponent(a.location.hash));return c=c.replace(/^\/\w\w\//,"/").replace(/^language\.\w\w\//,""),d&&(d=d.substring(1).replace(/&&/g,"&").split("&").filter(function(a){return a&&!/^language=/.test(a)}).join("&"),d&&(d="?"+d)),"/"+b+c+d+e}function c(){var c=d(this);return c.closest(".selected").length?c.blur():a.location=b(c.data("language")),!1}function e(){var a=d(this);return a.prop("href",b(a.data("language"))),!0}function f(){var a=d(".language-dropdown .dropdown-menu");a.on("click","a",c),a.on("contextmenu","a",e)}var g=d(".language-dropdown ul").data("use-href")?!1:!0;g&&f()}(),function(){function a(){h&&(clearTimeout(h),h=null)}function e(){var b=d(this),c=b.data("popover");c.options.animation=!1,b.data("popover",c).off("click",a).off("hidden",e)}function f(b){h=setTimeout(function(a){var b=a.data("popover");h=null,b.options.animation=!0,a.data("popover",b).popover("show")},1500,b),b.on("click",a).on("hidden",e)}function g(a){var e,g;a.length&&(e=d("#swig-login-template").remove().html().trim(),g=d("#swig-login-content").remove().html().trim(),a.popover({animation:!1,clickAway:!0,margin:18,template:function(){return e},content:function(){return g}}).on("click",function(b){a.show(),b.preventDefault()}).on("shown",function(){var e=!("activeElement"in b&&b.activeElement!==b.body);a.data("focus")&&e&&d("html:not([class*=ie])").find("#user").focus(),c.utils&&c.utils.addPlaceholder&&c.utils.addPlaceholder()}),a.hasClass("animate-in")&&f(a))}var h;g(d("#inline-login > a"))}(),function(){d("#logo-search").on("shown",function(){d("#search-input").focus(),d(this).css("overflow","visible")}).on("hide",function(){d(this).find("[data-toggle='dropdown']").parent().removeClass("open"),d("#form-search").hide(),d(this).css("overflow","hidden"),d(a).trigger("resize")}).on("hidden",function(){d("#form-search").show()}),d("#mobile-nav").on("shown",function(){d("body").css("overflow","hidden")}).on("hide",function(){d(this).scrollTop(0),d("body").css("overflow","auto")})}()}(window,document,Ss,jQuery,Math),function(a,b,c){var d,e,f=c(".form-search"),g=a.createSwigUtils?a.createSwigUtils(swig):{processTemplateAsString:function(){}};f.on("click",".dropdown-menu [type=radio]",function(a){PubSub.publishSync("searchFilter.change",this.value),a.stopPropagation()}),c(".lt-ie9 .form-search").on("click",".dropdown-menu label",function(a){PubSub.publishSync("searchFilter.change",c(this).find("input").val()),a.stopPropagation()}),PubSub.subscribe("searchFilter.change",function(a,b){{var c=f.find(".dropdown input[value="+b+"]");c.data()}c[0].checked=!0,f.find(".dropdown-trigger").text(c.parent("label").text()).end().attr("action",c.data("action")).find(".search-input").attr("placeholder",c.data("placeholder"))}),f.on("submit",function(a){var b;d&&(a.preventDefault(),b=c(d()),0===b.closest(this).length&&f.append(b.hide()),this.submit())}),b.getElementById("refine-search")&&(d=function(){var a,c;return function(d){return!a&&d&&(a=!0,c=null),c||(c=b.getElementById("refine-search"))}}(),c("#refine-search-trigger").popover({animation:!1,html:!0,trigger:"click",clickAway:!0,centerArrowOnTrigger:!0,margin:7,template:function(){return g.processTemplateAsString("swig-refine-search-template",null,!0)},content:function(){return g.processTemplateAsString("swig-refine-search-content",null,!0)},placement:"bottomRight"}).on("shown",function(){d(!0),c.fn.colorpicker&&(c(".color-picker input[name=color]").colorpicker({container:".color-picker"}).on("showPicker",function(){c(".color-picker .colorpicker").show()}).on("hidePicker",function(){c(".color-picker .colorpicker").hide()}).on("changeColor",function(a){c(".refine-search .swatch").css("background-color",a.color.toHex()).show()}),c(".lt-ie9 .color-picker input[name=color]").on("focusin",function(){c(this).colorpicker("show")})),e()}),f.on("click",'#refine-search input[name="refine-reset"]',function(){c.fn.colorpicker&&c(".color-picker input[name=color]").colorpicker("setValue",null),f[0].reset(),c(".swatch").css("background-color","#fff").hide()}),f.on("click","#refine-search .more-people-toggle, #refine-search .less-people-toggle",function(a){a.preventDefault(),c("#refine-search .more-people, #refine-search .more-people-toggle, #refine-search .less-people-toggle").toggle()}),PubSub.subscribe("searchFilter.change",function(a,b){var e=c.find(".media-type input",d());return"music"===b||"videos"===b?!1:void e.forEach(function(a){a.value!==b?(a.removeAttribute("checked"),a.checked=!1):(a.setAttribute("checked","checked"),a.checked=!0)})}),f.on("change","#refine-search .media-type input",function(){PubSub.publishSync("searchFilter.change",this.getAttribute("value"))}),f.on("change","#refine-search .more-people select",function(){PubSub.publishSync("morePeopleSelectChanged")}),PubSub.subscribe("morePeopleSelectChanged",function(){c('#refine-search input[name="no_people"], #refine-search input[name="editorial"]').removeAttr("checked"),c('#refine-search input[name="model_released"]')[0].setAttribute("checked","checked")}),f.on("change","#refine-search input[name=model_released]",function(){PubSub.publishSync(c(this).is(":checked")?"peopleOnlyChecked":"peopleOnlyUnchecked")}),PubSub.subscribe("peopleOnlyChecked",function(){c('#refine-search input[name="no_people"], #refine-search input[name="editorial"]').removeAttr("checked")}),PubSub.subscribe("peopleOnlyUnchecked",function(){c("#refine-search .more-people select").prop("selectedIndex",0)}),f.on("change","#refine-search input[name=editorial]",function(){c(this).is(":checked")&&PubSub.publishSync("editorialChecked")}),PubSub.subscribe("editorialChecked",function(){c('#refine-search input[name="model_released"]')[0].removeAttribute("checked"),c("#refine-search .more-people select").prop("selectedIndex",0)}),f.on("change","#refine-search input[name=no_people]",function(){c(this).is(":checked")&&PubSub.publishSync("noPeopleChecked")}),PubSub.subscribe("noPeopleChecked",function(){c('#refine-search input[name="model_released"]').removeAttr("checked"),c("#refine-search .more-people select").prop("selectedIndex",0)})),e=function(){function a(a){var c=[],d=new RegExp("^"+b.value,"i"),e=0,f=a.length;if(a)for(;f>e;e++){var g=a[e].display_name;null!==d.exec(g)&&c.push(g)}return c}var b=c(".refine-search input[name=photographer_name]")[0],d=function(a){var b=function(){function a(a){return"<span>"+a+"</span>"}var b,c;return function(d,e){return d!==b&&(b=d,c=new RegExp("^"+b,"i")),e=e.replace(c,a)}}();return function(c){return b(a.value,c.value)}}(b);c(b).typeahead({name:"photographer_name",limit:10,template:d,remote:{url:"/webstack/search/contributor_autocomplete?prefix=%QUERY",dataType:"json",cache:!1,filter:a}})}}(window,document,jQuery,Ss),Ss.LocalStore=function(a){a||(a={});var b="string"==typeof a.name?a.name:"Ss.LocalStore.default";b+=".";var c="number"==typeof a.storageTime?a.storageTime:36e5;try{!!localStorage.getItem}catch(d){window.localStorage={}}this.clear=function(){var a=this.keys(),b=this;_.each(a,function(a){b.remove(a)})},this.remove=function(a){delete localStorage[b+a]},this.get=function(a){var d=localStorage[b+a];if(d){var e=JSON.parse(d),f=e.storedOn+c,g=(new Date).getTime();if(f>g)return e.data;this.remove(a)}return null},this.store=function(a,c){var d={};d.data=JSON.parse(JSON.stringify(c)),d.storedOn=(new Date).getTime(),localStorage[b+a]=JSON.stringify(d)},this.keys=function(){var a=[];for(var c in localStorage)0===c.indexOf(b)&&a.push(c.replace(b,""));return a}},Ss.log=function(){var a,b;Ss.debug&&(a=window.console)&&(b=a.log)&&b.apply&&b.apply(a,arguments)},Ss.injectPixel=function(a){"prod"!=Ss.siteMode||Ss.isSecure?Ss.log(a):$('<img width="1" height="1" alt="">').attr("src",a).appendTo(document.body)},Ss.injectFrame=function(a){var b;if("prod"!=Ss.siteMode||Ss.isSecure)Ss.log(a);else{var c=$('<iframe style="position:absolute" scrolling="no" width="1" height="1" marginheight="0" marginwidth="0" frameborder="0"></iframe>');c.on("load",function(){b=!0}),c.attr("src",a).appendTo(document.body),setTimeout(function(){b||c.remove(),c=null},3500)}},Ss.getQueryStringParam=function(a){var b=RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))},Ss.hasFlash=function(a,b,c){var d,e="undefined",f="Shockwave Flash",g="ShockwaveFlash.ShockwaveFlash",h="application/x-shockwave-flash",i=0;if(typeof c.plugins!=e&&"object"==typeof c.plugins[f])d=c.plugins[f].description,!d||typeof c.mimeTypes!=e&&c.mimeTypes[h]&&!c.mimeTypes[h].enabledPlugin||(plugin=!0,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i=parseInt(d.replace(/^(.*)\..*$/,"$1"),10));else if(typeof a.ActiveXObject!=e)try{var j=new ActiveXObject(g);j&&(d=j.GetVariable("$version"),d&&(d=d.split(" ")[1].split(","),i=parseInt(d[0],10)))}catch(k){}return i}(window,document,navigator),Ss.jQRun=function(a,b){var c,d=0;for(b=b||this;c=a[d++];)$obj=$(c.test),$obj.length&&c.func.call(c.scope||b,$obj,c.args)},Ss.isAbVariant=function(a,b){return Ss&&Ss.abTests&&Ss.abTests[a]&&Ss.abTests[a][b]?!0:!1};var Ss=window.Ss||{};!function(a,b){window.dataLayer=window.dataLayer||[],window.optimizely=window.optimizely||[];var c={MOBILE:"m",TABLET:"t",DESKTOP:"d"},d=b.track.data,e={GA_EVENT:"gaEvent",TRANSACTION:"transaction",SET_ACCOUNT:"setAccount",SET_HASHED_EMAIL:"setHashedEmail",SET_SITE_TYPE:"setSiteType",VIEW_ITEM:"viewItem",TRACK_TRANSACTION:"trackTransaction",VIEW_LIST:"viewList",VIEW_HOME:"viewHome",VIEW_BASKET:"viewBasket"},f={setAccount:{event:e.SET_ACCOUNT,account:d.accountId},setSiteType:{event:e.SET_SITE_TYPE,type:b.isMobile?c.MOBILE:c.DESKTOP},setHashedEmail:{event:e.SET_HASHED_EMAIL,email:d.email||""}},g=function(a){a&&Array.isArray(a)?o(a):a&&n(a)},h=function(a){a&&n(a)},i=function(a){var c={event:e.VIEW_ITEM,item:a,isSubscribed:d.isSubscribed,hasClipbox:d.hasClipbox};window.dataLayer.push(f[e.SET_ACCOUNT],f[e.SET_SITE_TYPE],f[e.SET_HASHED_EMAIL],c),b.debug&&b.log("Ss.track.detail: ",c)},j=function(a){var c={event:e.TRACK_TRANSACTION,id:a.transactionId,new_customer:a.new_customer,deduplication:a.deduplication,item:a.item,isSubscribed:d.isSubscribed,hasClipbox:d.hasClipbox};window.dataLayer.push(f[e.SET_ACCOUNT],f[e.SET_SITE_TYPE],f[e.SET_HASHED_EMAIL],c),b.debug&&b.log("Ss.track.itemizedTransaction: ",c)},k=function(a){var c={event:e.VIEW_LIST,item:a,isSubscribed:d.isSubscribed,hasClipbox:d.hasClipbox};window.dataLayer.push(f[e.SET_ACCOUNT],f[e.SET_SITE_TYPE],f[e.SET_HASHED_EMAIL],c),b.debug&&b.log("Ss.track.listing: ",c)},l=function(){var a={event:e.VIEW_HOME,isSubscribed:d.isSubscribed,hasClipbox:d.hasClipbox};window.dataLayer.push(f[e.SET_ACCOUNT],f[e.SET_SITE_TYPE],f[e.SET_HASHED_EMAIL],a),b.debug&&b.log("Ss.track.viewHomePage: ",f,a)},m=function(a,c){var g={event:e.VIEW_BASKET,isSubscribed:d.isSubscribed,hasClipbox:d.hasClipbox,currency:c||"USD",item:a};window.dataLayer.push(f[e.SET_ACCOUNT],f[e.SET_SITE_TYPE],f[e.SET_HASHED_EMAIL],g),b.debug&&b.log("Ss.track.viewBasket: ",g)},n=function(a){a&&window.dataLayer.push(a),b.debug&&b.log("Ss.track.googleTagManager: ",a)},o=function(a){a&&n({event:"gaEvent",eventCategory:a[0],eventAction:a[1],eventLabel:a[2],eventValue:a[3]})},p=function(a){a&&b.lilBro.write(a),b.debug&&b.log("Ss.track.lilBro: ",a)},q=function(a){a&&window.optimizely.push(a),b.debug&&b.log("Ss.track.googleAnalytics: ",a)};b.track||(b.track={}),b.track.event=g,b.track.transaction=h,b.track.detail=i,b.track.itemizedTransaction=j,b.track.listing=k,b.track.viewHomePage=l,b.track.viewBasket=m,b.track.googleTagManager=n,b.track.googleAnalytics=o,b.track.lilBro=p,b.track.optimizely=q}(window,Ss),Ss=window.Ss||{},function(a,b,c,d){function e(a,e){var g={},h={delegateTargetSel:"body",activeClass:"active-overlay",addedToCartTmplSel:"#cart-added-template",notAddedToCartTmplSel:"#cart-not-added-template",fullCartTmplSel:"#full-cart-template",overlaySel:"#cart-add-overlay",closeOverlaySel:".overlay-close",cartCountSel:".cart-link .count",clipContainerSel:".clip-container, .inlineclip-content",clipContainerAddingClass:"adding-to-cart",overlayFullScreenClass:"overlay-fullscreen",fullScreenBreakpoint:850,addToCartUrl:"/video/ajax/cart/add",isSignedIn:!1,showAddedToCartTime:6e3,fadeInTime:200,fadeOutTime:200,affixOffset:35,accessors:{},onShow:c.noop,onHide:c.noop,onAddToCartDone:c.noop,onAddToCartFail:c.noop,mouseEnterCancelsHideTimeout:!0,mouseLeaveShowAddedToCartTime:500};g.settings={};var i=function(){return g.settings=c.extend({},h,e),g.sel=a,g.$overlay=c(g.settings.overlaySel),g.templates={},g.hideTimeout=null,g.packJson=g.$overlay.data().packJson,c(g.settings.delegateTargetSel).on("click",g.sel,j.addButtonClick),c.fn.affix&&g.$overlay.affix({offset:g.settings.affixOffset}),g};g.hide=function(a){var b=c.Deferred();return clearTimeout(g.hideTimeout),g.hideTimeout=a?setTimeout(function(){k.hideOverlay(b)},a):k.hideOverlay(b),b};var j={documentClickToHideOverlay:function(a){var b=c(a.target);return g.$overlay.find(a.target).length&&!b.is(g.settings.closeOverlaySel)||b.is(g.sel)?!0:void g.hide()},addButtonClick:function(a){a.preventDefault(),a.stopPropagation(),g.$targetButton=c(a.target),g.$targetClip=g.$targetButton.closest(g.settings.clipContainerSel),g.clipData=k.getClipData(a.target),k.adding(!0);var b={id:g.clipData.clipId,src:g.clipData.trackingSrc};g.clipData.size&&(b.size=g.clipData.size),c.ajax({url:g.settings.addToCartUrl,data:{items:[b]}}).done(j.addToCartDone).fail(j.addToCartFail)},addToCartDone:function(a){var b=k.isClipInCartResponse(g.clipData.clipId,a);return k.getHeaderCartCount()<=a.length&&!b?j.fullCartFail():k.getHeaderCartCount()>=100?j.fullCartFail():(k.adding(!1),k.setHeaderCartCount(a.length),k.showAdded(g.clipData,b),g.isModal||g.hide(g.settings.showAddedToCartTime),void g.settings.onAddToCartDone.call(g))},addToCartFail:function(){k.adding(!1),k.showNotAdded(g.clipData),g.settings.onAddToCartFail.call(g)},fullCartFail:function(){k.adding(!1),k.showCartFull(g.clipData),g.settings.onAddToCartFail.call(g)},overlayMouseEnter:function(){clearTimeout(g.hideTimeout)},overlayMouseLeave:function(){clearTimeout(g.hideTimeout),g.hide(g.settings.mouseLeaveShowAddedToCartTime)}},k={showAdded:function(a,b){var e,f;switch(f=b&&b.size?b.size:a.inCart.size.trim()){case"4K":e=g.packJson.ultrahd4k;break;case"HD":e=g.packJson.hd;break;case"SD":e=g.packJson.sd;break;case"Web":e=g.packJson.web}return d.isAbVariant("WebAndSdNames","lowResAndWeb")&&(e.res=e.res.replace(/\bWeb( [Rr]es|\b)/g,"Low Res").replace(/\bSD\b/g,"Web")),k.setOverlayTmpl(c.extend({},a,{fivePackData:e}),g.settings.addedToCartTmplSel),e.hasValidSubscriptionForResolution||(g.$overlay.find(".js-add-to-cart-view-cart").addClass("btn-secondary"),g.$overlay.find(".absinthe-show-5-pack").show()),g.$overlay.off("mouseenter",j.overlayMouseEnter),g.$overlay.off("mouseleave",j.overlayMouseLeave),g.settings.mouseEnterCancelsHideTimeout&&(g.$overlay.on("mouseenter",j.overlayMouseEnter),g.$overlay.on("mouseleave",j.overlayMouseLeave)),k.showOverlay()},showNotAdded:function(a){return k.setOverlayTmpl(a,g.settings.notAddedToCartTmplSel),k.showOverlay()},showCartFull:function(a){return k.setOverlayTmpl(a,g.settings.fullCartTmplSel),k.showOverlay()},showOverlay:function(){var a=c.Deferred();return clearTimeout(g.hideTimout),f.width()<=g.settings.fullScreenBreakpoint?g.$overlay.addClass(g.settings.overlayFullScreenClass):g.$overlay.removeClass(g.settings.overlayFullScreenClass),g.isModal&&g.$overlay.addClass(g.settings.overlayFullScreenClass),g.$overlay.fadeIn(g.settings.fadeInTime).promise().done(function(){a.resolve()}),c.fn.affix&&g.$overlay.affix("checkPosition"),c(b).on("click.addtocarthide",j.documentClickToHideOverlay),c("body").addClass(g.settings.activeClass),g.settings.onShow.call(g),a},hideOverlay:function(a){return c(b).off(".addtocarthide"),g.$overlay.fadeOut(g.settings.fadeOutTime).promise().done(function(){a.resolve()}),c("body").removeClass(g.settings.activeClass),g.settings.onHide.call(g),g.$targetClip=g.$targetButton=null},getClipData:function(a){var b=g.$targetClip.data()||{};for(var c in g.settings.accessors)g.settings.accessors.hasOwnProperty(c)&&"function"==typeof g.settings.accessors[c]&&(b[c]=g.settings.accessors[c](a));return b},isClipInCartResponse:function(a,b){for(var c=0;c<b.length;c++)if(b[c].id==a)return b[c];return!1},getHeaderCartCount:function(){return g.$cartCount=g.$cartCount||c(g.settings.cartCountSel),parseInt(g.$cartCount.html(),10)||0},setHeaderCartCount:function(a){g.$cartCount.text(a),g.$cartCount.each(function(){this.style.display="none",this.offsetHeight,this.style.display=""})},adding:function(a){g.$targetClip&&(a?g.$targetClip.addClass(g.settings.clipContainerAddingClass):g.$targetClip.removeClass(g.settings.clipContainerAddingClass))
},setOverlayTmpl:function(a,b){g.templates[b]=g.templates[b]||c(b);var d=c.tmpl(g.templates[b],a).wrap("<div>").parent().html();g.$overlay.html(d)}};return i()}var f=c(a);d.addToCart=e}(window,document,jQuery,Ss),Ss=window.Ss||{},function(a,b,c,d){function e(a,d){var e={},g={delegateTargetSel:"body",activeClass:"active-overlay",addToClipboxTmplSel:"#clipbox-addto-template",addedToClipboxTmplSel:"#clipbox-added-template",signinTmplSel:"#clipbox-signin-template",overlaySel:"#clipbox-overlay",overlayContentSel:".overlay-info",closeOverlaySel:".overlay-close",clipboxLinkSel:".clipbox-titles a",clipboxTextInputSel:"#clipbox-text-input",clipboxSubmitInputSel:"#clipbox-submit-input",buttonDisabledClass:"disabled",clipContainerSel:".clip-container, .inlineclip-content",clipContainerActiveClass:"active",overlayFullScreenClass:"overlay-fullscreen",fullScreenBreakpoint:850,fullScreenPositionTop:"15vh",clipboxListUrl:"/video/ajax/collections/list?sort=last_updated",addClipToClipboxUrl:"/video/ajax/collections/items/add",createNewClipboxUrl:"/video/ajax/collections/add",isSignedIn:!1,offset:{top:0,left:0},showAddedToClipboxTime:3e3,fadeInTime:50,fadeOutTime:100,accessors:{},onShow:c.noop,onShown:c.noop,onHide:c.noop};e.settings={};var h=function(){return e.settings=c.extend({},g,d),e.sel=a,e.$overlay=c(e.settings.overlaySel),e.$overlayContent=e.$overlay.find(e.settings.overlayContentSel),e.filledTmplHtml="",c(e.settings.delegateTargetSel).on("click",e.sel,i.addButtonClick),e};e.show=function(a){var d,f=c.Deferred(),g=!!e.filledTmplHtml;return e.$targetButton=c(a),e.$targetClip=e.$targetButton.closest(e.settings.clipContainerSel),e.clipData=j.getClipData(a),e.$targetClip.addClass(e.settings.clipContainerActiveClass),e.settings.isSignedIn?j.setAddToClipboxTmpl():j.setSignInTmpl(),d=j.getOverlayOffset(),e.$overlay.css(d).stop().fadeIn(e.settings.fadeInTime).promise().done(function(){g&&e.settings.onShown.call(e),f.resolve()}),c(b).on("click.addtoclipbox",i.documentClickToHideOverlay),c("body").addClass(e.settings.activeClass),e.settings.onShow.call(e),f},e.hide=function(a){var d=c.Deferred(),f=function(){c(b).off(".addtoclipbox"),e.$overlay.stop().fadeOut(e.settings.fadeOutTime).promise().done(function(){d.resolve()}),e.$targetClip.removeClass(e.settings.clipContainerActiveClass),c("body").removeClass(e.settings.activeClass),e.settings.onHide.call(e),e.$submitButton=e.$targetClip=e.$targetButton=null};return a?setTimeout(f,a):f(),d};var i={documentClickToHideOverlay:function(a){var b=c(a.target);return e.$overlay.find(a.target).length&&!b.is(e.settings.closeOverlaySel)||b.is(e.$targetButton)?!0:void e.hide()},addButtonClick:function(a){a.preventDefault(),e.$targetClip&&e.hide(),e.show(a.target)},clipboxClick:function(a){a.preventDefault();var b=c(a.target).data();j.loading(!0),c.ajax({url:e.settings.addClipToClipboxUrl,data:{collection_id:b.id,items:[e.clipData.clipId],tracking_src:e.clipData.trackingSrc}}).done(function(a){j.loading(!1),j.setAddedClipToClipboxTmpl(b.name,a.collection_url),e.hide(e.settings.showAddedToClipboxTime)})},clipboxSubmitClick:function(){j.loading(!0),c.ajax({url:e.settings.createNewClipboxUrl,data:{name:e.$overlay.find(e.settings.clipboxTextInputSel).val(),items:[e.clipData.clipId],tracking_src:e.clipData.trackingSrc}}).done(function(a){j.loading(!1),j.setAddedClipToClipboxTmpl(a.collection_name,a.collection_url),e.hide(e.settings.showAddedToClipboxTime).done(function(){j.resetOverlayContent()})})},clipboxTextInputKeyup:function(a){e.$submitButton=e.$submitButton||e.$overlay.find(e.settings.clipboxSubmitInputSel),a.target.value.length?(e.$submitButton.removeClass(e.settings.buttonDisabledClass),e.$submitButton.removeAttr("disabled"),13===a.keyCode&&e.$submitButton.trigger("click")):(e.$submitButton.addClass(e.settings.buttonDisabledClass),e.$submitButton.attr("disabled","disabled"))}},j={getClipData:function(a){var b=e.$targetClip.data()||{};for(var c in e.settings.accessors)e.settings.accessors.hasOwnProperty(c)&&"function"==typeof e.settings.accessors[c]&&(b[c]=e.settings.accessors[c](a));return b},getOverlayOffset:function(){var a;return f.width()<=e.settings.fullScreenBreakpoint?(e.$overlay.addClass(e.settings.overlayFullScreenClass),a={top:e.settings.fullScreenPositionTop,left:""}):(e.$overlay.removeClass(e.settings.overlayFullScreenClass),a=e.$targetButton.offset(),a.top=a.top+("function"==typeof e.settings.offset.top?e.settings.offset.top(e.$targetButton):e.settings.offset.top),a.left=a.left+("function"==typeof e.settings.offset.left?e.settings.offset.left(e.$targetButton):e.settings.offset.left)),a},loading:function(a){a?e.$overlayContent.addClass("loading"):e.$overlayContent.removeClass("loading")},setAddToClipboxTmpl:function(){if(e.filledTmplHtml)e.$overlayContent.html(e.filledTmplHtml);else{var a,b=c(e.settings.addToClipboxTmplSel),d={clipboxes:[]};j.loading(!0),c.ajax({url:e.settings.clipboxListUrl,cache:!1}).done(function(f){d={clipboxes:f.items||[]},a=c.tmpl(b,d).html(),e.filledTmplHtml=a}).fail(function(){a=c.tmpl(b,d)}).always(function(){e.$overlayContent.html(a),e.$overlay.off(".clipboxoverlay"),e.$overlay.on("click.clipboxoverlay",e.settings.clipboxLinkSel,i.clipboxClick).on("click.clipboxoverlay",e.settings.clipboxSubmitInputSel,i.clipboxSubmitClick).on("keyup.clipboxoverlay",e.settings.clipboxTextInputSel,i.clipboxTextInputKeyup),setTimeout(function(){j.loading(!1)},100),e.settings.onShown.call(e)})}},setSignInTmpl:function(){if(!e.filledTmplHtml){var a=c.tmpl(c(e.settings.signinTmplSel),{}).html();e.filledTmplHtml=a}e.$overlayContent.html(e.filledTmplHtml)},setAddedClipToClipboxTmpl:function(a,b){var d=c(e.settings.addedToClipboxTmplSel),f={clipboxurl:b,clipboxchosen:a},g=c.tmpl(d,f).html();e.$overlayContent.html(g)},resetOverlayContent:function(){e.$overlay.off(".clipboxoverlay"),e.$submitButton=null,e.$overlayContent.empty(),e.filledTmplHtml=""}};return h()}var f=c(a);d.addToClipbox=e}(window,document,jQuery,Ss);var Ss=window.Ss||{};!function(a,b,c,d){function e(a,b){var d={delegateTargetSel:"body",attrTrackit:"trackit",attrTrackitOn:"trackit-on",trackitEvents:"click.sstrackit"};this.settings={},this.settings=c.extend({},d,b),this.$delegateTarget=c(this.settings.delegateTargetSel),this.$delegateTarget.on(this.settings.trackitEvents,a,this.trackitEvent.bind(this))}e.prototype.trackitEvent=function(a){var b,e=c(a.currentTarget).data(this.settings.attrTrackit);e&&(b=e.split(":",4),b.length<2?b.push(a.type):4===b.length&&parseInt(b[3],10)&&(b[3]=parseInt(b[3],10)),d.track.event(b))},e.prototype.triggerTrackitEvent=function(a,b){handlers.trackitEvent.call(a,b)},d.Trackit=e}(document,window,jQuery,Ss),function(a,b){function c(b){this.settings=a.extend({},d,b)}var d={buttonSel:".closable-close",animateTo:{opacity:0,height:0,marginTop:0,marginBottom:0,padding:0},cookieName:"cl",cookiePath:null,cookieMaxAge:31536e3,idDataAttr:"closable-id",id:null,onClose:a.noop};c.prototype={init:function(b){this.el=b,null==this.settings.id?(this.closableId=a(this.el).data("closable-id"),this.closableId=this.closableId?String(this.closableId):null):this.closableId=this.settings.id,a(b).on("click",this.settings.buttonSel,this,this.handler.closeButtonClick)},persistClosedState:function(){if(this.settings.cookieName&&this.closableId&&this.closableId.length){var a=this.getCookieValue(this.settings.cookieName);a?new RegExp("(^|,)"+this.closableId+"(,|$)").test(a)||(a+=","+this.closableId):a=this.closableId,b.cookie=this.settings.cookieName+"="+a+";max-age="+this.settings.cookieMaxAge+("string"==typeof this.settings.cookiePath?";path="+this.settings.cookiePath:"")}},getCookieValue:function(a){var c=encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&"),d=b.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+c+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");return decodeURIComponent(d)||null},handler:{closeButtonClick:function(b){var c=b.data;b.stopPropagation(),b.preventDefault(),a(b.delegateTarget).animate(c.settings.animateTo),c.persistClosedState.call(c),c.settings.onClose.call(b.delegateTarget)}},method:{close:function(b){a(b).find(this.settings.buttonSel).trigger("click")}}},a.fn.closable=function(b,d){return"string"!=typeof b&&(d=b,b=!1),this.each(function(){var e=a(this),f=e.data("closable");f||(f=new c(d),f.init(this),e.data("closable",f)),b&&"function"==typeof f.method[b]&&f.method[b].call(f,this)})}}(jQuery,document),function(a,b,c,d){Modernizr.input.placeholder||c("#search-input").placeholder();var e=!Modernizr.video.h264&&!Modernizr.video.webm&&!d.hasFlash&&d.hasFlash>8;if(e){var f=c("#no-flash-warning").html();c("#shutterstock-header").before(f)}d.trackIt=new d.Trackit(".trackit",{});var g=10,h=c("#search-input:visible");h.each(function(){var a=c(this).autocomplete({source:function(a,b){var d=c(this.element).val();c.ajax({url:"/video/ajax/autocomplete",dataType:"json",data:{q:encodeURIComponent(d),language:c("html").attr("lang")},success:function(a){var e=a.autocompletions;if(e&&e.length>0){var f=e;g>0&&(f=f.slice(0,g)),b(c.map(f,function(a){var b=a.pattern,c={value:a.pattern};return b!=d?(c.label=b.substr(0,d.length)==d?"<strong>"+b.substr(0,d.length)+"</strong>"+b.substr(d.length):"<strong>"+b+"</strong>",c):void 0}))}else b()}})},select:function(a,b){var d=c(a.target).closest("form");d.find("input[type=text]").val(b.item.value),d.submit()},appendTo:".form-search",minLength:1,delay:100});a.data("autocomplete")._renderItem=function(a,b){return c("<li></li>").data("item.autocomplete",b).append("<a>"+b.label+"</a>").appendTo(a)},a.data("autocomplete")._resizeMenu=function(){var a=this.menu.element;a.width(439)}}),h.on("input",function(){var a=h.val(),b="#search-input-tooltip-holder + .tooltip",d=c("#search-input-tooltip-holder");d.is("[data-title]")&&isNaN(a)===!1&&(a=parseInt(a,10),a>2100&&0===c(b).length&&(d.tooltip({html:!0,placement:"bottomLeft",trigger:"manual"}).tooltip("show"),c(b).closable({id:"sid",cookiePath:"/video",cookieName:"cls",buttonSel:"#search-input-tooltip-holder + .tooltip .icon-remove",animateTo:{},onClose:function(){d.tooltip("destroy"),d.removeAttr("data-title"),c(b).closable("close")}})))}),c("#site-tabs").on("click",function(){d.track.event(["header","click","site tabs"])}),c("#shutterstock-header").on("click",".customer-phone",function(){d.track.event(["header","click","phone"])}).on("click",".livechat-header-item",function(){d.track.event(["header","click","livechat"])}).on("click",".language-dropdown",function(){d.track.event(["header",c(this).hasClass("open")?"close":"open","languages"])}).on("click",".user-options",function(){d.track.event(["header",c(this).hasClass("open")?"close":"open","account_header"])}).on("click",".nav-link:nth-child(2)",function(){d.track.event(["header","click","subscribe"])}).on("click",".cart-link",function(){d.track.event(["header","click","cart"])}),c("#user-clipbox").on("click",function(){d.track.event(["header","click","clipboxes"])}),c("#user-account").on("click",function(){d.track.event(["header","click","account"])}),c("#user-download-history").on("click",function(){d.track.event(["header","click","download history"])}),c("#user-logout").on("click",function(){d.track.event(["header","click","sign out"])}),c("#site-search").bind("submit",function(){d.track.event(["search","submit"])}),c("#site-search .dropdown-menu").on("click","label",function(a){if(c(a.target).is("label")){var b="dropdown "+(c(a.currentTarget).attr("id")||"");d.track.event(["search","click",b])}}),c(function(){function a(){var a=80*Math.round(c(window).width()/80),b=80*Math.round(c(window).height()/80);return a+" x "+b}function b(a){var b=e.get("last");b&&b===a||(d.track.event(["viewport","load",a]),e.store("last",a))}if(Modernizr.localstorage){var e=new d.LocalStore({name:"dimensionStore"});b(a()),c(window).resize(function(){var c=a();setTimeout(function(){var d=a();c===d&&b(d)},1e3)})}}),c("#announcement-tos").closable({onClose:function(){c(".announcement-tos.announcement-placeholder").animate({opacity:0,height:0}),c.get("/video/ajax/accept-current-tos")}}),c(".announcement-eu-cookie").closable({cookieMaxAge:7776e3,onClose:function(){c(".announcement-eu-cookie.announcement-placeholder").animate({opacity:0,height:0})}}),c(".announcement-aud").closable({cookieMaxAge:7776e3,onClose:function(){c(".announcement-aud.announcement-placeholder").animate({opacity:0,height:0})}});var i=c("#purchase-modal"),j=c("#banner-repurchase-top"),k=c(".one-pack-upsell-link");new d.Trackit(".trackit-banner",{delegateTargetSel:i}),new d.Trackit(".trackit-banner",{delegateTargetSel:j}),new d.Trackit(".trackit-banner",{delegateTargetSel:c(".announcement")}),j.closable({cookiePath:"/video",cookieName:"clrp",cookieMaxAge:604800,onClose:function(){c(".announcement-repurchase.announcement-placeholder").animate({opacity:0,height:0})}}),j.on("click",".renew-now",function(){i.modal("show")}),i.on("hide",function(){j.closable("close"),i.hasClass("success")&&window.location.href.indexOf("/video/cart")>-1&&location.reload(!0),k.show()}).modal({backdrop:"static",topOverride:!0}).on("click",".btn-buy-now",function(a){a.preventDefault();var b=c(this);b.attr("disabled","disabled").text(b.data("please-wait")),c.post("/video/ajax/one-click-checkout",{subscription:b.data("subscription"),transactionSource:"announcement"},"json").done(function(a){0===a.errors.length?(i.addClass("success").html(a.htmlContent),j.closable("close"),b.removeAttr("disabled").text(b.data("buy-now")),k.remove(),d.track.transaction(a.conversionTrackingEvent)):window.location="/video/checkout?retry=1&subscription="+b.data("subscription")}).fail(function(){window.location="/video/checkout?retry=1&subscription="+b.data("subscription")})})}(window,document,jQuery,Ss),LilBro=window.LilBro||{},LilBro.Module=window.LilBro.Module||{},LilBro=function(a){function b(){if(e()){var a=k.getPersisted();a&&(k.persisted_data_onload=a)}}function c(a){return function(b){b||(b=window.event);var c=i(b),d=!1;if(a.container.querySelectorAll){var e=a.container.querySelectorAll(a.trigger);do{for(var g=0;g<e.length;g++)if(e[g]===c){d=!0,b.stopPropagation&&b.stopPropagation();break}d||(c=c.parentNode)}while(c.parentNode&&c!==a.container&&!d)}if(d){var h,j;try{(h=a.data(c))&&(j=a.target(c))}catch(l){}h&&j&&k._updatePersisted(a.id,f(j),h)}}}function d(a,b,c){return function(d){d||(d=window.event);var e=i(d),f={type:a,event:d,target:e},g={};if(b)try{g=b(e)}catch(h){}c||(d.cancelBubble=!0,d.stopPropagation&&d.stopPropagation()),LilBro.Radio("data").broadcast({fill:f,data:g})}}function e(){return window.localStorage&&window.JSON&&document.querySelectorAll?!0:(LilBro.debug("Persistence not available"),!1)}function f(a){if("string"==typeof a){"http"!==a.substring(0,4)&&(a=window.location.protocol+"//domain.com/"+a.replace(/^\/+/,""));var b=document.createElement("a");b.href=a,a=b}return h(a.protocol+a.pathname.replace(/^\/+/,"")+a.search)}function g(a,b){for(var c in b)if(a===b[c])return!0;return!1}function h(a){function b(a,b,c){for(;0<c--;)a.push(b)}function c(a,b){return a<<b|a>>>32-b}function d(a,b,c){return a^b^c}function e(a,b){var c=(65535&b)+(65535&a),d=(b>>>16)+(a>>>16)+(c>>>16);return(65535&d)<<16|65535&c}var f="0123456789abcdef";return function(a){for(var b,c=[],d=4*a.length,e=0;d>e;e++)b=a[e>>2]>>8*(3-e%4),c.push(f.charAt(b>>4&15)+f.charAt(15&b));return c.join("")}(function(a,f){var g,h,i,j,k,l=a.length,m=1732584193,n=4023233417,o=2562383102,p=271733878,q=3285377520,r=[];b(r,1518500249,20),b(r,1859775393,20),b(r,2400959708,20),b(r,3395469782,20),a[f>>5]|=128<<24-f%32,a[(f+65>>9<<4)+15]=f;for(var s=0;l>s;s+=16){g=m,h=n,i=o,j=p,k=q;for(var t=0,u=[];80>t;t++){u[t]=16>t?a[t+s]:c(u[t-3]^u[t-8]^u[t-14]^u[t-16],1);var v=function(a,b,c,d,e){var f=(65535&e)+(65535&a)+(65535&b)+(65535&c)+(65535&d),g=(e>>>16)+(a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(f>>>16);return(65535&g)<<16|65535&f}(20>t?function(a,b,c){return a&b^~a&c}(h,i,j):40>t?d(h,i,j):60>t?function(a,b,c){return a&b^a&c^b&c}(h,i,j):d(h,i,j),k,r[t],u[t],c(g,5));k=j,j=i,i=c(h,30),h=g,g=v}m=e(m,g),n=e(n,h),o=e(o,i),p=e(p,j),q=e(q,k)}return[m,n,o,p,q]}(function(a){for(var b=[],c=255,d=8*a.length,e=0;d>e;e+=8)b[e>>5]|=(a.charCodeAt(e/8)&c)<<24-e%32;return b}(a).slice(),8*a.length))}function i(a){var b;return a.target?b=a.target:a.srcElement&&(b=a.srcElement),3==b.nodeType&&(b=b.parentNode),b}function j(){if(LilBro.Session.exists()){var a=k.getSession().getItem(k.persist_key)||{},b=k.cache_limit.persisted_data,c=[];for(var d in a)a.hasOwnProperty(d)&&c.push({k:d,ts:a[d].ts});if(c.length>b){c.sort(function(a,b){return a.ts>b.ts});for(var e=c.splice(0,c.length-b),f=0;f<e.length;f++)delete a[e[f].k];k.getSession().setItem(k.persist_key,a)}}}var k=this;this.persist_key="lilbro_persisted",this.cache_limit={write_once:250,persisted_data:50},this.persisted_data_onload={},this.initialize=function(a){if(this.args=a||{},a&&a.server&&a.element){this.watch_container(a.element,a.watch_focus),this.storage=new LilBro.SessionStorage;var c={};if(a.event_base)for(var d in a.event_base)a.event_base.hasOwnProperty(d)&&(c[d]=a.event_base[d]);if(this.listener=new LilBro.EventListener({base:c,server:a.server,ssl_server:a.ssl_server,visit_id_cookie:a.visit_id_cookie||"visit_id",visitor_id_cookie:a.visitor_id_cookie||"visitor_id",autogenerate_visit_cookies:a.autogenerate_visit_cookies||!1}),this.storage.getItem("lilbrobug"+window.location.protocol)){var e=decodeURIComponent(this.storage.getItem("lilbrobug"+window.location.protocol));this.listener.sendData(e)}LilBro.Session.exists()&&b(),j()}},this.watch_container=function(a,b){a&&(a.addEventListener?(a.addEventListener("click",d("click",null,!0),!1),b&&(a.addEventListener("focusin",d("focusin",null,!0),!1),a.addEventListener("focusout",d("focusout",null,!0),!1))):(a.attachEvent("onclick",d("click",null,!0),!1),b&&(a.attachEvent("onfocusin",d("focusin",null,!0),!1),a.attachEvent("onfocusout",d("focusout",null,!0),!1))))},this.watch=function(a){if(a&&a.element){var b=a.event?a.event:"click";a.element.addEventListener?a.element.addEventListener(b,d(b,a.callback,a.bubble),!1):a.element.attachEvent("on"+b,d(b,a.callback,a.bubble),!1)}},this.persist=function(a){a&&e()&&a.id&&a.container&&a.trigger&&a.data&&a.target&&(a.container.addEventListener?a.container.addEventListener("mousedown",c(a),!1):a.container.attachEvent("onmousedown",c(a),!1))},this._updatePersisted=function(a,b,c){var d=k.getSession().getItem(k.persist_key)||{};return!d[b]&&(d[b]={}),d[b].ts=Math.round((new Date).getTime()/1e3),!d[b][a]&&(d[b][a]={}),d[b][a].data=c,LilBro.debug("Update persisted data for target_key",b,c),k.getSession().setItem(k.persist_key,d)},this.getPersisted=function(a,b){if(LilBro.Session.exists()){var c=k.getSession().getItem(k.persist_key)||{},d=f(window.location);if(c.hasOwnProperty(d)){var e=c[d];if(!a)return e;if(e.hasOwnProperty(a)){if("string"==typeof e[a].invalidated)try{e[a].invalidated=JSON.parse(e[a].invalidated)}catch(i){e[a].invalidated=[]}else"object"!=typeof e[a].invalidated&&(e[a].invalidated=[]);var j=e[a].data;delete j.event_type;var l,m=LilBro.Schema.type_map[b];try{l=m+"_"+h(JSON.stringify(j))}catch(n){l=m}if(b&&!g(l,e[a].invalidated))return e[a].invalidated.push(l),LilBro.debug("Invalidating event_type",b,"with key",l),k.getSession().setItem(k.persist_key,c),this.persisted_data_onload.hasOwnProperty(a)?this.persisted_data_onload[a]:j;LilBro.debug("Stopped invalidated event_type",b,"for key",l)}}}},this.write=function(a,b){if("undefined"!=typeof b&&b){if(!window.localStorage)return;var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(d);c.sort(function(a,b){return a>b});for(var e=0;e<c.length;e++)c[e]+=":"+a[c[e]];var f=h(c.toString()),i="write_once",j=k.getSession().getItem(i);if(j){if(j=j.split(","),g(f,j))return;j.push(f)}else j=[f];var l=k.cache_limit.write_once;j.length>l&&j.splice(0,j.length-l),k.getSession().setItem(i,j.toString())}var m={};for(var n in a)a.hasOwnProperty(n)&&(m[n]=a[n]);LilBro.debug("Writing data for ",a),LilBro.Radio("data").broadcast({data:m})},this.writePersisted=function(a,b,c){if(e()&&LilBro.Session.exists()){var d={},f=k.getPersisted(b,a);if(f&&f.hasOwnProperty("data")){if(f=f.data,"object"==typeof c)for(var g in c)c.hasOwnProperty(g)&&(d[g]=c[g]);for(var h in f)f.hasOwnProperty(h)&&(d[h]=f[h]);d.event_type=a,LilBro.debug('Writing persisted data for event "%s" for persist_id "%s"',a,b),LilBro.Radio("data").broadcast({data:d})}}},this.getSession=function(){return this.session||(this.session=new LilBro.Session),this.session},this.initialize(a)},LilBro.consoleMode=!1,LilBro.debug=function(){try{LilBro.consoleMode&&console.log.apply(console,arguments)}catch(a){}},LilBro.LocalStorage=function(){function a(a,b){if(window.JSON&&!b&&"string"!=typeof a)try{a=JSON.stringify(a)}catch(c){}return a}function b(a,b){if(!window.JSON||b)return a;try{parsed=JSON.parse(a)}catch(c){parsed=a}finally{return parsed}}var c=window,d=c.document,e={};return this.initialize=function(){return window.localStorage?this.localStorageInterface(c.localStorage):window.globalStorage?this.globalStorageInterface(c.globalStorage):d.documentElement.addBehavior?this.userDataStorageInterface():this.memoryStorageInterface()},this.localStorageInterface=function(c){return{getItem:function(a,d){return b(c.getItem(a),d)},setItem:function(b,d,e){d=a(d,e);try{c.setItem(b,d)}catch(f){("QUOTA_EXCEEDED_ERR"===f.name||"NS_ERROR_DOM_QUOTA_REACHED"===f.name)&&LilBro.debug("localStorage capacity exceeded")}},removeItem:function(a){return c.removeItem(a)}}},this.globalStorageInterface=function(d){var e=d[c.location.hostname];return{getItem:function(a,c){return b(e[key]&&e[key].value,c)},setItem:function(b,c,d){e[b]=a(c,d)},removeItem:function(a){return delete e[a]}}},this.userDataStorageInterface=function(){function a(a){return function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(storage),e.appendChild(storage),storage.addBehavior("#default#userData"),storage.load(g);var c=a.apply(store,b);return e.removeChild(storage),c}}function c(a){return a.replace(i,"___")}var e,f,g="localStorage";try{f=new ActiveXObject("htmlfile"),f.open(),f.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),f.close(),e=f.w.frames[0].document,storage=e.createElement("div")}catch(h){storage=d.createElement("div"),e=d.body}var i=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");return{getItem:function(d,e){a(function(a,b){return b=c(b),a.getAttribute(b)});return b(d,e)},setItem:function(){return a(function(a,b,d){b=c(b),a.setAttribute(b,store.serialize(d));try{a.save(g)}catch(e){LilBro.debug("userData capacity exceeded")}})},removeItem:function(){return a(function(a,b){b=c(b),a.removeAttribute(b),a.save(g)})}}},this.memoryStorageInterface=function(){return{getItem:function(a){return e.hasOwnProperty(a)?e[a]:!1},setItem:function(a,b){return e[a]=b,!0},removeItem:function(){return delete e[item],!0}}},this.initialize()},LilBro.SessionStorage=function(){var a={};return this.initialize=function(){return window.sessionStorage?this.sessionStorageInterface(window.sessionStorage):this.memoryStorageInterface()},this.sessionStorageInterface=function(a){return{getItem:function(b){var c=a.getItem(b);try{parsed=JSON.parse(c)}catch(d){parsed=c}finally{return parsed}},setItem:function(b,c){return a.setItem(b,JSON.stringify(c))},removeItem:function(b){return a.removeItem(b)}}},this.memoryStorageInterface=function(){return{getItem:function(b){return a.hasOwnProperty(b)?a[b]:!1},setItem:function(b,c){return a[b]=c,!0},removeItem:function(){return delete a[item],!0}}},this.initialize()},LilBro.Session=function(){var a,b;return this.initialize=function(){if(window.JSON){b=new LilBro.LocalStorage;var c=Math.round((new Date).getTime()/1e3);a=b.getItem(LilBro.Session.session_key)||!1,LilBro.Session.exists()?(LilBro.debug("Active session remaining for "+(a.ts-(c-LilBro.Session.max_age))/1e3/60+" m"),a.ts=c+LilBro.Session.extend_time,LilBro.debug("Extended session")):(a={data:{},ts:c},LilBro.debug("Created a new session")),b.setItem(LilBro.Session.session_key,a)}else LilBro.debug("Skipped initializing session since JSON is missing.")},this.getItem=function(b){return a&&a.data.hasOwnProperty(b)?a.data[b]:!1},this.setItem=function(c,d){a&&(a.data[c]=d,a.ts=Math.round((new Date).getTime()/1e3)+LilBro.Session.extend_time,b.setItem(LilBro.Session.session_key,a))},this.initialize()},LilBro.Session.extend_time=18e5,LilBro.Session.max_age=36e5,LilBro.Session.session_key="lilbro_session",LilBro.Session.exists=function(){var a=new LilBro.LocalStorage,b=Math.round((new Date).getTime()/1e3);return session=a.getItem(LilBro.Session.session_key)||!1,!session||!session.ts||session.ts&&session.ts<b-LilBro.Session.max_age?!1:session.ts&&session.ts>=b-LilBro.Session.max_age?!0:void 0},LilBro.EventListener=function(a){var b=this;this.initialize=function(a){this.base=a.base,this.server=a.server,this.ssl_server=a.ssl_server,this.visit_id_cookie=a.visit_id_cookie,this.visitor_id_cookie=a.visitor_id_cookie,this.autogenerate_visit_cookies=a.autogenerate_visit_cookies,this.storage=new LilBro.SessionStorage,LilBro.Radio("data").subscribe([this.onData,this])},this.onData=function(a){var b=a.data||{},c=a.schema||LilBro.Schema;b.version=c.version,c.key_map.hasOwnProperty("site_version")&&(b.site_version=LilBro.Schema.version);for(var d in this.base)this.base.hasOwnProperty(d)&&!b.hasOwnProperty(d)&&(b[d]=this.base[d]);if(!a.hasOwnProperty("fill")||a.fill!==!1){var e=a.fill;"object"!=typeof e&&(e={}),b=this.fill(b,e)}var f=[];for(var g in c.key_map){var h=c.key_map[g];f[h]="event_type"===g?c.type_map[b[g]]||0:b[g]||"",f[h]=encodeURIComponent(f[h])}if(LilBro.consoleMode)try{console.log("LILBRO_EVENT:%s",JSON.stringify({data:b,event:f}))}catch(i){}else{var j=window.location.protocol,k=j+"//"+("https:"===j?this.ssl_server||this.server:this.server)+"/"+f.join("%01");this.storage.setItem("lilbrobug"+j,encodeURIComponent(k)),this.sendData(k)}},this.sendData=function(a){parseInt(this.getVisitorId(),10)%4?this.sendImage(a):this.sendAjax(a)},this.onSent=function(){b.storage.removeItem("lilbrobug"+window.location.protocol)},this.getXhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},this.sendAjax=function(a){var c=!1,d=b.getXhr();if(d)try{d.onerror=d.onabort=function(){b.sendImage(a)},d.onreadystatechange=function(){2===d.readyState&&200===d.status&&b.onSent.apply(b)},d.open("GET",a+"?"+this.randomHexBlocks(1),!0),d.send(null)}catch(e){c=!0}else c=!0;c&&this.sendImage(a)},this.sendImage=function(a){var b=new Image;b.onload=this.onSent,b.src=a+".png?"+this.randomHexBlocks(1)},this.fill=function(a,b){if(b&&b.type&&"undefined"==typeof a.event_type&&(a.event_type=b.type),b&&b.event){var c="",d="";b.event.pageX||b.event.pageY?(c=b.event.pageX,d=b.event.pageY):(b.event.clientX||b.event.clientY)&&(c=b.event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=b.event.clientY+document.body.scrollTop+document.documentElement.scrollTop),a.mouse_x=c,a.mouse_y=d}a.viewport_width=document.documentElement.clientWidth,a.viewport_height=document.documentElement.clientHeight;var e=0,f=0;if("number"==typeof window.pageYOffset?(e=window.pageXOffset,f=window.pageYOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(e=document.body.scrollLeft,f=document.body.scrollTop):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(e=document.documentElement.scrollLeft,f=document.documentElement.scrollTop),a.scroll_x=e||0,a.scroll_y=f||0,b&&b.target){var g,h,i,j=b.target.id,k=b.target.className,l=!j,m=!k;if(!j||!k){for(i=b.target,g=b.target.tagName,h=b.target.tagName;(!j||!k)&&b.target.parentNode;)b.target=b.target.parentNode,j||(g=b.target.tagName+"/"+g,j=b.target.id),k||(h=b.target.tagName+"/"+h,k=b.target.className);b.target=i}a.element_id=j,a.element_class=k,j&&l&&(a.element_id_from=g),k&&m&&(a.element_class_from=h),a.element_name=b.target.name||"",a.element_tag=b.target.tagName||"",a.element_type=b.target.type||"",a.element_checked=b.target.checked?1:"",b.target.type&&"text"!==b.target.type.toLowerCase()&&"password"!==b.target.type.toLowerCase()&&(a.element_value=b.target.value||"");var n=0,o=0;for(i=b.target;b.target&&!isNaN(b.target.offsetLeft)&&!isNaN(b.target.offsetTop);)n+=b.target.offsetLeft-b.target.scrollLeft,o+=b.target.offsetTop-b.target.scrollTop,b.target=b.target.offsetParent;b.target=i,a.element_x=n,a.element_y=o}return LilBro.BrowserDetect&&(a.browser=LilBro.BrowserDetect.browser,a.browser_version=LilBro.BrowserDetect.version,a.operating_system=LilBro.BrowserDetect.OS),a.request_path=window.location.pathname,a.visitor_id||(a.visitor_id=this.getVisitorId()),a.visit_id||(a.visit_id=this.getVisitId()),a},this.getVisitorId=function(){var a=this.getCookie(this.visitor_id_cookie);return this.autogenerate_visit_cookies&&(a||(a=this.randomHexBlocks(4)),this.setCookie(this.visitor_id_cookie,a,this.getVisitorExpiry())),a},this.getVisitId=function(){var a=this.getCookie(this.visit_id_cookie);return this.autogenerate_visit_cookies&&(a||(a=this.randomHexBlocks(4)),this.setCookie(this.visit_id_cookie,a,this.getVisitExpiry())),a},this.getVisitorExpiry=function(){var a=new Date;return a.setTime(a.getTime()+7776e6),a.toGMTString()},this.getVisitExpiry=function(){var a=new Date;return a.setTime(a.getTime()+18e5),a.toGMTString()},this.randomHexBlocks=function(a){a||(a=4);for(var b="",c=0;a>c;c++)b+=parseInt(Math.random()*Math.pow(2,32),10).toString(16);return b},this.setCookie=function(a,b,c){var d;d=c?"; expires="+c:"",document.cookie=a+"="+b+d+"; path=/"},this.getCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},this.initialize(a)},LilBro=window.LilBro||{},LilBro.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;if(this.versionSearchString=a[b].versionSearch||a[b].identity,c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPod",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};
try{LilBro.BrowserDetect.init()}catch(e){}!function(a,b,c){b[a]=c(a,b)}("Radio",LilBro,function(a,b){"use strict";function c(a){return arguments.length?c.$.channel(a):c.$.reset(),c.$}return c.$={version:"0.2",channelName:"",channels:[],reset:function(){c.$.channelName="",c.$.channels=[]},broadcast:function(){var a,c,d,e,f=this.channels[this.channelName],g=f.length;for(a=0;g>a;a++)c=f[a],"object"==typeof c&&c.length&&(d=c[0],e=c[1]||b),d.apply(e,arguments);return this},channel:function(a){var b=this.channels;return b[a]||(b[a]=[]),this.channelName=a,this},subscribe:function(){var a,b,c=arguments,d=this.channels[this.channelName],e=c.length,f=[];for(a=0;e>a;a++)f=c[a],b="function"==typeof f?[f]:f,"object"==typeof b&&b.length&&d.push(b);return this},unsubscribe:function(){var a,b,c,d=arguments,e=this.channels[this.channelName],f=d.length,g=e.length,h=0;for(a=0;f>a;a++)for(h=0,g=e.length,b=0;g>b;b++)c=b-h,e[c][0]===d[a]&&(e.splice(c,1),h++);return this}},c}),LilBro=window.LilBro||{},LilBro.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;if(this.versionSearchString=a[b].versionSearch||a[b].identity,c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPod",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};try{LilBro.BrowserDetect.init()}catch(e){}LilBro=window.LilBro||{},LilBro.Module=window.LilBro.Module||{},LilBro.Module.Performance=function(){this.track=function(){if(window.performance){var b={},c=["redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoaded","domComplete","loadEventStart","loadEventEnd","unloadStart","unloadEnd"];window.onload=function(){window.setTimeout(function(){try{var d=window.performance.timing;if(d.hasOwnProperty("navigationStart")){for(var e=d.navigationStart,f=0;f<c.length;f++)if(d.hasOwnProperty(c[f])){var g=d[c[f]]-e;g>0&&(b[a(c[f])]=g)}var h=window.performance.navigation;b.redirect_count=h.redirect_count,b.load_type=h.type,LilBro.Radio("data").broadcast({data:b,schema:LilBro.Module.Performance.Schema})}}catch(i){}})}}};var a=function(a){return a.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()})}},function(){var a=this;a.LilBro=a.LilBro||{},a.LilBro.Module=a.LilBro.Module||{},a.LilBro.Module.Performance=a.LilBro.Module.Performance||{};var b={};b.version="_performance_v01",b.key_map={version:1,site_version:2,timestamp:3,visitor_id:4,visit_id:5,browser:6,browser_version:7,operating_system:8,request_path:9,language:10,country_ip:11,customer_id:12,navigation_start:13,redirect_start:14,redirect_end:15,fetch_start:16,domain_lookup_start:17,domain_lookup_end:18,connect_start:19,secure_connection_start:20,connect_end:21,request_start:22,response_start:23,response_end:24,dom_loading:25,dom_interactive:26,dom_content_loaded:27,dom_complete:28,load_event_start:29,load_event_end:30,unload_start:31,unload_end:32,redirect_count:33,load_type:34},b.type_map={page_load:1},a.LilBro.Module.Performance.Schema=b}.call(this),function(){var a=this;a.LilBro=a.LilBro||{},a.LilBro.Module=a.LilBro.Module||{},a.LilBro.Module.Referral=function(){var a=this;this.args={},this.freshEvent,this.event,this.data,this.referer,this.persist_key="lilbro_referral",this.storage,this.cache_limit=50,this.get_param_map={cr:function(a){return{creative:a}},kw:function(a){return{keyword:a}},mt:function(b){return{traffic_type:a._decodeUTF8(b)}},pl:function(a){var b={},c=a.split("-");return c[0]&&(b.publisher=c[0]),c[1]&&(b.placement=c[1]),b}},this.referer_map={__default__:{publisher:"qq",placement:"00",creative:"00",keyword:""},__empty__:{publisher:"dl",placement:"00",creative:"00",keyword:""},"^www.google.(?:co.)?(.+)":{publisher:"gg",placement:function(a){return"com"==a[1]?"us":a[1]},creative:"ns",keyword_field:"q"},"(.+).ask.com$":{publisher:"akn",placement:function(a){return"www"==a[1]?"us":a[1]},creative:"ns",keyword_field:"q"},"(?:(.+).)?search.yahoo.(?:co.)?(com|jp)$":{publisher:"yh",placement:function(a){return a[1]&&"www"!=a[1]||"com"!=a[2]?a[1]||a[2]:"us"},creative:"ns",keyword_field:"p"},"^www.bing.com$":{publisher:"bn",placement:"00",creative:"ns",keyword_field:"q"},"\\b(?:search|recherche|suche)(.*?).aol.(?:co.)?(.+)":{publisher:"ao",placement:function(a){return"com"==a[2]?"us":a[2]},creative:"ns",keyword_field:["q","query"]}},this.track=function(a){this.args=a||{};var b=new LilBro.LocalStorage,c=b.getItem(this.persist_key)||[];if(this.data=this.parseData(window))a.customer_id?(LilBro.debug("Writing referrer data for customer #",a.customer_id),this.data.customer_id=a.customer_id,this.write(this.data)):(LilBro.debug("Storing referrer data in LocalStorage to be passed on login."),c.push(this.data),LilBro.debug("Store has "+c.length+" items"),c.length>this.cache_limit&&c.splice(this.cache_limit));else if(a.customer_id&&(LilBro.debug("Found "+c.length+" referrer data objects to send."),c.length))for(var d;d=c.shift();)!d.customer_id&&(d.customer_id=a.customer_id),this.write(d);b.setItem(this.persist_key,c)},this.write=function(a){a.http_referer&&(a.http_referer=encodeURIComponent(a.http_referer)),a.event_type="referral",LilBro.Radio("data").broadcast({data:a,schema:LilBro.Module.Referral.Schema})},this.parseData=function(a){var b,c={};b=this._getURIParams(a.location.search);for(var d in this.get_param_map)if(this.get_param_map.hasOwnProperty(d)&&b.hasOwnProperty(d)){var e=this.get_param_map[d](b[d]);for(var f in e)e.hasOwnProperty(f)&&(c[f]=e[f])}if(b.pl||b.cr)return c;if(this.args.new_visit){if(this.referer=a.document.referrer||!1,this.referer&&(this.referer=this._decodeUTF8(this.referer)),this.referer){c.http_referer=this.referer;var g=document.createElement("a");g.href=this.referer;var h=g.hostname,i={};g.search&&(i=this._getURIParams(g.search)),g.hash&&!this._countObj(i)&&(i=this._getURIParams(g.hash));for(var j in this.referer_map)if(this.referer_map.hasOwnProperty(j)&&"__empty__"!==j&&"__default__"!==j){var k=new RegExp(j,"i");if(k.test(h)){var l=this.referer_map[j];c.publisher=l.publisher,l.placement&&("function"==typeof l.placement?c.placement=l.placement(k.exec(h)):"string"==typeof l.placement&&(c.placement=l.placement)),c.creative=l.creative;var m=[];if("object"==typeof l.keyword_field)for(var n=0;n<l.keyword_field.length;n++)i.hasOwnProperty(l.keyword_field[n])&&m.push(i[l.keyword_field[n]]);else"string"==typeof l.keyword_field&&i.hasOwnProperty(l.keyword_field)&&m.push(i[l.keyword_field]);c.keyword=m.join(" ");break}}for(var f in this.referer_map.__default__)this.referer_map.__default__.hasOwnProperty(f)&&!c.hasOwnProperty(f)&&(c[f]=this.referer_map.__default__[f])}else this.referer_map.hasOwnProperty("__empty__")&&this._mergeObj(c,this.referer_map.__empty__);return c}},this._mergeObj=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},this._countObj=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},this._getURIParams=function(a){var b=a.substr(1).split("&");if(""==b)return{};for(var c={},d=0;d<b.length;++d){var e=b[d].split("=");2==e.length&&(c[e[0]]=decodeURIComponent(e[1].replace(/\+/g," ")))}return c},this._decodeUTF8=function(a){try{a=decodeURIComponent(escape(a))}catch(b){}finally{return a}}},"undefined"!=typeof module&&module.exports&&(module.exports=a.LilBro.Module.Referral)}.call(this),function(){var a=this;a.LilBro=a.LilBro||{},a.LilBro.Module=a.LilBro.Module||{},a.LilBro.Module.Referral=a.LilBro.Module.Referral||{};var b={};b.version="_referral_v01",b.key_map={version:1,site_version:2,timestamp:3,event_type:4,visitor_id:5,visit_id:6,customer_id:7,keyword:8,traffic_type:9,http_referer:10,publisher:11,placement:12,creative:13},b.type_map={referral:1},a.LilBro.Module.Referral.Schema=b}.call(this),function(){var a=this;a.LilBro=a.LilBro||{},a.LilBro.Schema={},a.LilBro.Schema.version="vf05",a.LilBro.Schema.key_map={version:1,timestamp:2,event_type:3,visitor_id:4,visit_id:5,mouse_x:6,mouse_y:7,viewport_width:8,viewport_height:9,scroll_x:10,scroll_y:11,element_id:12,element_id_from:13,element_class:14,element_class_from:15,element_name:16,element_tag:17,element_type:18,element_checked:19,element_value:20,element_x:21,element_y:22,browser:23,browser_version:24,operating_system:25,request_path:26,clip_id:27,ref_clip_id:28,clip_pos:29,clip_page:30,query:31,results_per_page:32,results_sort_by:33,results_total:34,language:35,country_ip:36,customer_id:37,days_to_expiry:38,sub_dl_credits:39,tracking_id:40,lightbox_id:41,media_size:42,source:43,ab_tests:44,event_timestamp:45,uid:46,user_agent:47},a.LilBro.Schema.type_map={click:1,page_load:2,focusin:3,focusout:4,search:5,clip_hover:6,download_click:7,search_lightbox:8,search_detail_view:9,search_pagination:10,event_compare:11}}.call(this);